import{a as L}from"./axios.7b768d2b.js";import{d as fe}from"./pinia.32c02ade.js";import{b as ee,h as T,j as ce,_ as oe,u as re,e as ge,d as pe,L as _e}from"./main.f5ac513d.js";import{r as M,a as z,O as b,j as q,k as F,U as d,P as B,M as k,X as U,as as P,R as E,F as ne,aW as ie,l as a,g as O,o as K,u as e,L as le,bx as se,f as j,i as ae,by as W,aX as de,z as Z}from"./@vue.8cc12e6e.js";import{v as G}from"./vue-i18n.c6de3223.js";import{c as y,r as D,n as te,d as R,e as H,m as be,a as $e,s as we,b as ue}from"./@vuelidate.c7422de1.js";import{u as Q}from"./mail-driver.f62a08cc.js";import{b as ve}from"./vue-router.746ec05f.js";import"./v-tooltip.1cd7a91e.js";import"./vue-resize.0b8cd4b5.js";import"./@popperjs.940d197a.js";import"./lodash.8ab3583e.js";import"./@intlify.0be1c2d8.js";import"./vue.a6ed3e81.js";import"./moment.9709ab41.js";import"./guid.7b3dea7e.js";import"./@headlessui.4523e0e1.js";import"./@vueuse.b6c5a1c1.js";import"./prettier.6e0a0647.js";import"./vue-flatpickr-component.30399bbe.js";import"./flatpickr.dff0933c.js";import"./@heroicons.aa650707.js";import"./v-money3.6f830de1.js";import"./maska.1121c2e3.js";const A=(i=!1)=>{const V=i?window.pinia.defineStore:fe,u=ee();return V({id:"installation",state:()=>({currentDataBaseData:{database_connection:"mysql",database_hostname:"127.0.0.1",database_port:"3306",database_name:null,database_username:null,database_password:null,app_url:window.location.origin}}),actions:{fetchInstallationRequirements(){return new Promise((r,n)=>{L.get("/api/v1/installation/requirements").then(c=>{r(c)}).catch(c=>{T(c),n(c)})})},fetchInstallationStep(){return new Promise((r,n)=>{L.get("/api/v1/installation/wizard-step").then(c=>{r(c)}).catch(c=>{T(c),n(c)})})},addInstallationStep(r){return new Promise((n,c)=>{L.post("/api/v1/installation/wizard-step",r).then(o=>{n(o)}).catch(o=>{T(o),c(o)})})},fetchInstallationPermissions(){return new Promise((r,n)=>{L.get("/api/v1/installation/permissions").then(c=>{r(c)}).catch(c=>{T(c),n(c)})})},fetchInstallationDatabase(r){return new Promise((n,c)=>{L.get("/api/v1/installation/database/config",{params:r}).then(o=>{n(o)}).catch(o=>{T(o),c(o)})})},addInstallationDatabase(r){return new Promise((n,c)=>{L.post("/api/v1/installation/database/config",r).then(o=>{n(o)}).catch(o=>{T(o),c(o)})})},addInstallationFinish(){return new Promise((r,n)=>{L.post("/api/v1/installation/finish").then(c=>{r(c)}).catch(c=>{T(c),n(c)})})},setInstallationDomain(r){return new Promise((n,c)=>{L.put("/api/v1/installation/set-domain",r).then(o=>{n(o)}).catch(o=>{T(o),c(o)})})},installationLogin(){return new Promise((r,n)=>{L.get("/sanctum/csrf-cookie").then(c=>{c&&L.post("/api/v1/installation/login").then(o=>{u.setSelectedCompany(o.data.company),r(o)}).catch(o=>{T(o),n(o)})})})},checkAutheticated(){return new Promise((r,n)=>{L.get("/api/v1/auth/check").then(c=>{r(c)}).catch(c=>{n(c)})})}}})()},he={class:"w-full md:w-2/3"},ye={class:"mb-6"},Ie={key:0,class:"grid grid-flow-row grid-cols-3 p-3 border border-gray-200 lg:gap-24 sm:gap-4"},qe={class:"col-span-2 text-sm"},Ce={class:"text-right"},Be={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 bg-green-500 rounded-full"},Ve={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 bg-red-500 rounded-full"},De={key:1},Se={class:"col-span-2 text-sm"},Fe={class:"text-right"},Me={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 bg-green-500 rounded-full"},ze={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 bg-red-500 rounded-full"},ke={__name:"Step1RequirementsCheck",emits:["next"],setup(i,{emit:V}){const u=M(""),r=M(""),n=M(!1);M(!0);const c=A(),o=z(()=>{if(u.value){let v=!0;for(const s in u.value)return u.value[s]||(v=!1),u.value&&r.value.supported&&v}return!1});async function p(){n.value=!0;const v=await c.fetchInstallationRequirements();v.data&&(u.value=v?.data?.requirements?.requirements?.php,r.value=v?.data?.phpSupportInfo)}function l(){n.value=!0,V("next"),n.value=!1}return(v,s)=>{const I=b("BaseIcon"),t=b("BaseButton"),g=b("BaseWizardStep");return q(),F(g,{title:v.$t("wizard.req.system_req"),description:v.$t("wizard.req.system_req_desc")},{default:d(()=>[B("div",he,[B("div",ye,[r.value?(q(),k("div",Ie,[B("div",qe,U(v.$t("wizard.req.php_req_version",{version:r.value.minimum})),1),B("div",Ce,[P(U(r.value.current)+" ",1),r.value.supported?(q(),k("span",Be)):(q(),k("span",Ve))])])):E("",!0),u.value?(q(),k("div",De,[(q(!0),k(ne,null,ie(u.value,($,C)=>(q(),k("div",{key:C,class:"grid grid-flow-row grid-cols-3 p-3 border border-gray-200 lg:gap-24 sm:gap-4"},[B("div",Se,U(C),1),B("div",Fe,[$?(q(),k("span",Me)):(q(),k("span",ze))])]))),128))])):E("",!0)]),o.value?(q(),F(t,{key:0,onClick:l},{left:d($=>[a(I,{name:"ArrowRightIcon",class:O($.class)},null,8,["class"])]),default:d(()=>[P(U(v.$t("wizard.continue"))+" ",1)]),_:1})):E("",!0),u.value?E("",!0):(q(),F(t,{key:1,loading:n.value,disabled:n.value,onClick:p},{default:d(()=>[P(U(v.$t("wizard.req.check_req")),1)]),_:1},8,["loading","disabled"]))])]),_:1},8,["title","description"])}}},Ue={key:1,class:"relative"},Pe={class:"grid grid-flow-row grid-cols-3 lg:gap-24 sm:gap-4"},Ne={class:"col-span-2 p-3"},Ee={class:"p-3 text-right"},Ge={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 rounded-full bg-green-500"},Oe={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 rounded-full bg-red-500"},xe={__name:"Step2PermissionCheck",emits:["next"],setup(i,{emit:V}){let u=M(!1),r=M(!1),n=M([]);const{tm:c,t:o}=G.useI18n(),p=A(),l=ce();K(()=>{v()});async function v(){u.value=!0;const I=await p.fetchInstallationPermissions();n.value=I.data.permissions.permissions,I.data&&I.data.permissions.errors&&setTimeout(()=>{l.openDialog({title:c("wizard.permissions.permission_confirm_title"),message:o("wizard.permissions.permission_confirm_desc"),yesLabel:"OK",noLabel:"Cancel",variant:"danger",hideNoButton:!1,size:"lg"}).then(t=>{t.data&&(u.value=!1)})},500),u.value=!1}function s(){r.value=!0,V("next"),r.value=!1}return(I,t)=>{const g=b("BaseContentPlaceholdersText"),$=b("BaseContentPlaceholdersBox"),C=b("BaseContentPlaceholders"),m=b("BaseIcon"),_=b("BaseButton"),f=b("BaseWizardStep");return q(),F(f,{title:I.$t("wizard.permissions.permissions"),description:I.$t("wizard.permissions.permission_desc")},{default:d(()=>[e(u)?(q(),F(C,{key:0},{default:d(()=>[(q(),k(ne,null,ie(3,(w,h)=>B("div",{key:h,class:"grid grid-flow-row grid-cols-3 lg:gap-24 sm:gap-4 border border-gray-200"},[a(g,{lines:1,class:"col-span-4 p-3"})])),64)),a($,{rounded:!0,class:"mt-10",style:{width:"96px",height:"42px"}})]),_:1})):(q(),k("div",Ue,[(q(!0),k(ne,null,ie(e(n),(w,h)=>(q(),k("div",{key:h,class:"border border-gray-200"},[B("div",Pe,[B("div",Ne,U(w.folder),1),B("div",Ee,[w.isSet?(q(),k("span",Ge)):(q(),k("span",Oe)),B("span",null,U(w.permission),1)])])]))),128)),le(a(_,{class:"mt-10",loading:e(r),disabled:e(r),onClick:s},{left:d(w=>[a(m,{name:"ArrowRightIcon",class:O(w.class)},null,8,["class"])]),default:d(()=>[P(" "+U(I.$t("wizard.continue")),1)]),_:1},8,["loading","disabled"]),[[se,!e(u)]])]))]),_:1},8,["title","description"])}}},Le=["onSubmit"],We={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},Re={__name:"MysqlDatabase",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:V}){const u=i,r=j(["sqlite","mysql","pgsql"]),{t:n}=G.useI18n(),c=ae("utils"),o=A();K(()=>{for(const g in p.value)u.configData.hasOwnProperty(g)&&(p.value[g]=u.configData[g])});const p=z(()=>o.currentDataBaseData),l=g=>c.checkValidUrl(g),v={database_connection:{required:y.withMessage(n("validation.required"),D)},database_hostname:{required:y.withMessage(n("validation.required"),D)},database_port:{required:y.withMessage(n("validation.required"),D),numeric:te},database_name:{required:y.withMessage(n("validation.required"),D)},database_username:{required:y.withMessage(n("validation.required"),D)},app_url:{required:y.withMessage(n("validation.required"),D),isUrl:y.withMessage(n("validation.invalid_url"),l)}},s=R(v,p.value);function I(){if(s.value.$touch(),s.value.$invalid)return!0;V("submit-data",p.value)}function t(){s.value.database_connection.$touch(),V("on-change-driver",p.value.database_connection)}return(g,$)=>{const C=b("BaseInput"),m=b("BaseInputGroup"),_=b("BaseMultiselect"),f=b("BaseIcon"),w=b("BaseButton");return q(),k("form",{action:"",onSubmit:W(I,["prevent"])},[B("div",We,[a(m,{label:g.$t("wizard.database.app_url"),error:e(s).app_url.$error&&e(s).app_url.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:p.value.app_url,"onUpdate:modelValue":$[0]||($[0]=h=>p.value.app_url=h),invalid:e(s).app_url.$error,type:"text"},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(m,{label:g.$t("wizard.database.connection"),error:e(s).database_connection.$error&&e(s).database_connection.$errors[0].$message,required:""},{default:d(()=>[a(_,{modelValue:p.value.database_connection,"onUpdate:modelValue":[$[1]||($[1]=h=>p.value.database_connection=h),t],invalid:e(s).database_connection.$error,options:r,"can-deselect":!1,"can-clear":!1},null,8,["modelValue","invalid","options"])]),_:1},8,["label","error"]),a(m,{label:g.$t("wizard.database.port"),error:e(s).database_port.$error&&e(s).database_port.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:p.value.database_port,"onUpdate:modelValue":$[2]||($[2]=h=>p.value.database_port=h),invalid:e(s).database_port.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(m,{label:g.$t("wizard.database.db_name"),error:e(s).database_name.$error&&e(s).database_name.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:p.value.database_name,"onUpdate:modelValue":$[3]||($[3]=h=>p.value.database_name=h),invalid:e(s).database_name.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(m,{label:g.$t("wizard.database.username"),error:e(s).database_username.$error&&e(s).database_username.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:p.value.database_username,"onUpdate:modelValue":$[4]||($[4]=h=>p.value.database_username=h),invalid:e(s).database_username.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(m,{label:g.$t("wizard.database.password")},{default:d(()=>[a(C,{modelValue:p.value.database_password,"onUpdate:modelValue":$[5]||($[5]=h=>p.value.database_password=h),type:"password"},null,8,["modelValue"])]),_:1},8,["label"]),a(m,{label:g.$t("wizard.database.host"),error:e(s).database_hostname.$error&&e(s).database_hostname.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:p.value.database_hostname,"onUpdate:modelValue":$[6]||($[6]=h=>p.value.database_hostname=h),invalid:e(s).database_hostname.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),a(w,{type:"submit",class:"mt-4",loading:i.isSaving,disabled:i.isSaving},{left:d(h=>[i.isSaving?E("",!0):(q(),F(f,{key:0,name:"SaveIcon",class:O(h.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(g.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],40,Le)}}},Te=["onSubmit"],je={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},Ae={__name:"PgsqlDatabase",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:V}){const u=i,r=j(["sqlite","mysql","pgsql"]),{t:n}=G.useI18n(),c=ae("utils"),o=A(),p=z(()=>o.currentDataBaseData);K(()=>{for(const g in p.value)u.configData.hasOwnProperty(g)&&(p.value[g]=u.configData[g])});const l=g=>c.checkValidUrl(g),v={database_connection:{required:y.withMessage(n("validation.required"),D)},database_hostname:{required:y.withMessage(n("validation.required"),D)},database_port:{required:y.withMessage(n("validation.required"),D),numeric:te},database_name:{required:y.withMessage(n("validation.required"),D)},database_username:{required:y.withMessage(n("validation.required"),D)},app_url:{required:y.withMessage(n("validation.required"),D),isUrl:y.withMessage(n("validation.invalid_url"),l)}},s=R(v,p.value);function I(){if(s.value.$touch(),s.value.$invalid)return!0;V("submit-data",p.value)}function t(){s.value.database_connection.$touch(),V("on-change-driver",p.value.database_connection)}return(g,$)=>{const C=b("BaseInput"),m=b("BaseInputGroup"),_=b("BaseMultiselect"),f=b("BaseIcon"),w=b("BaseButton");return q(),k("form",{action:"",onSubmit:W(I,["prevent"])},[B("div",je,[a(m,{label:g.$t("wizard.database.app_url"),"content-loading":i.isFetchingInitialData,error:e(s).app_url.$error&&e(s).app_url.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:p.value.app_url,"onUpdate:modelValue":$[0]||($[0]=h=>p.value.app_url=h),"content-loading":i.isFetchingInitialData,invalid:e(s).app_url.$error,type:"text"},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(m,{label:g.$t("wizard.database.connection"),"content-loading":i.isFetchingInitialData,error:e(s).database_connection.$error&&e(s).database_connection.$errors[0].$message,required:""},{default:d(()=>[a(_,{modelValue:p.value.database_connection,"onUpdate:modelValue":[$[1]||($[1]=h=>p.value.database_connection=h),t],"content-loading":i.isFetchingInitialData,invalid:e(s).database_connection.$error,options:r,"can-deselect":!1,"can-clear":!1},null,8,["modelValue","content-loading","invalid","options"])]),_:1},8,["label","content-loading","error"]),a(m,{label:g.$t("wizard.database.port"),"content-loading":i.isFetchingInitialData,error:e(s).database_port.$error&&e(s).database_port.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:p.value.database_port,"onUpdate:modelValue":$[2]||($[2]=h=>p.value.database_port=h),"content-loading":i.isFetchingInitialData,invalid:e(s).database_port.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(m,{label:g.$t("wizard.database.db_name"),"content-loading":i.isFetchingInitialData,error:e(s).database_name.$error&&e(s).database_name.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:p.value.database_name,"onUpdate:modelValue":$[3]||($[3]=h=>p.value.database_name=h),"content-loading":i.isFetchingInitialData,invalid:e(s).database_name.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(m,{label:g.$t("wizard.database.username"),"content-loading":i.isFetchingInitialData,error:e(s).database_username.$error&&e(s).database_username.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:p.value.database_username,"onUpdate:modelValue":$[4]||($[4]=h=>p.value.database_username=h),"content-loading":i.isFetchingInitialData,invalid:e(s).database_username.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(m,{"content-loading":i.isFetchingInitialData,label:g.$t("wizard.database.password")},{default:d(()=>[a(C,{modelValue:p.value.database_password,"onUpdate:modelValue":$[5]||($[5]=h=>p.value.database_password=h),"content-loading":i.isFetchingInitialData,type:"password"},null,8,["modelValue","content-loading"])]),_:1},8,["content-loading","label"]),a(m,{label:g.$t("wizard.database.host"),"content-loading":i.isFetchingInitialData,error:e(s).database_hostname.$error&&e(s).database_hostname.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:p.value.database_hostname,"onUpdate:modelValue":$[6]||($[6]=h=>p.value.database_hostname=h),"content-loading":i.isFetchingInitialData,invalid:e(s).database_hostname.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"])]),le(a(w,{"content-loading":i.isFetchingInitialData,type:"submit",class:"mt-4",loading:i.isSaving,disabled:i.isSaving},{left:d(h=>[i.isSaving?E("",!0):(q(),F(f,{key:0,name:"SaveIcon",class:O(h.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(g.$t("wizard.save_cont")),1)]),_:1},8,["content-loading","loading","disabled"]),[[se,!i.isFetchingInitialData]])],40,Te)}}},Ye=["onSubmit"],Xe={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},Ze={__name:"SqliteDatabase",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:V}){const u=i,r=j(["sqlite","mysql","pgsql"]),{t:n}=G.useI18n(),c=ae("utils"),o=A(),p=z(()=>o.currentDataBaseData);K(()=>{for(const g in p.value)u.configData.hasOwnProperty(g)&&(p.value[g]=u.configData[g])});const l=g=>c.checkValidUrl(g),v={database_connection:{required:y.withMessage(n("validation.required"),D)},database_name:{required:y.withMessage(n("validation.required"),D)},app_url:{required:y.withMessage(n("validation.required"),D),isUrl:y.withMessage(n("validation.invalid_url"),l)}},s=R(v,p.value);function I(){if(s.value.$touch(),s.value.$invalid)return!0;V("submit-data",p.value)}function t(){s.value.database_connection.$touch(),V("on-change-driver",p.value.database_connection)}return(g,$)=>{const C=b("BaseInput"),m=b("BaseInputGroup"),_=b("BaseMultiselect"),f=b("BaseIcon"),w=b("BaseButton");return q(),k("form",{action:"",onSubmit:W(I,["prevent"])},[B("div",Xe,[a(m,{label:g.$t("wizard.database.app_url"),"content-loading":i.isFetchingInitialData,error:e(s).app_url.$error&&e(s).app_url.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:p.value.app_url,"onUpdate:modelValue":$[0]||($[0]=h=>p.value.app_url=h),"content-loading":i.isFetchingInitialData,invalid:e(s).app_url.$error,type:"text"},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(m,{label:g.$t("wizard.database.connection"),"content-loading":i.isFetchingInitialData,error:e(s).database_connection.$error&&e(s).database_connection.$errors[0].$message,required:""},{default:d(()=>[a(_,{modelValue:p.value.database_connection,"onUpdate:modelValue":[$[1]||($[1]=h=>p.value.database_connection=h),t],"content-loading":i.isFetchingInitialData,invalid:e(s).database_connection.$error,options:r,"can-deselect":!1,"can-clear":!1},null,8,["modelValue","content-loading","invalid","options"])]),_:1},8,["label","content-loading","error"]),a(m,{label:g.$t("wizard.database.db_path"),error:e(s).database_name.$error&&e(s).database_name.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:d(()=>[a(C,{modelValue:p.value.database_name,"onUpdate:modelValue":$[2]||($[2]=h=>p.value.database_name=h),"content-loading":i.isFetchingInitialData,invalid:e(s).database_name.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","error","content-loading"])]),le(a(w,{"content-loading":i.isFetchingInitialData,type:"submit",class:"mt-4",loading:i.isSaving,disabled:i.isSaving},{left:d(h=>[i.isSaving?E("",!0):(q(),F(f,{key:0,name:"SaveIcon",class:O(h.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(g.$t("wizard.save_cont")),1)]),_:1},8,["content-loading","loading","disabled"]),[[se,!i.isFetchingInitialData]])],40,Ye)}}},Je={components:{Mysql:Re,Pgsql:Ae,Sqlite:Ze},emits:["next"],setup(i,{emit:V}){const u=M("mysql"),r=M(!1),{t:n}=G.useI18n(),c=re(),o=A(),p=z(()=>o.currentDataBaseData);async function l(s){let I={connection:s};const t=await o.fetchInstallationDatabase(I);t.data.success&&(p.value.database_connection=t.data.config.database_connection),s==="sqlite"?p.value.database_name=t.data.config.database_name:p.value.database_name=null}async function v(s){r.value=!0;try{let I=await o.addInstallationDatabase(s);if(r.value=!1,I.data.success){await o.addInstallationFinish(),V("next",3),c.showNotification({type:"success",message:n("wizard.success."+I.data.success)});return}else if(I.data.error){if(I.data.requirement){c.showNotification({type:"error",message:n("wizard.errors."+I.data.error,{version:I.data.requirement.minimum,name:s.value.database_connection})});return}c.showNotification({type:"error",message:n("wizard.errors."+I.data.error)})}else I.data.errors?c.showNotification({type:"error",message:I.data.errors[0]}):I.data.error_message&&c.showNotification({type:"error",message:I.data.error_message})}catch{c.showNotification({type:"error",message:n("validation.something_went_wrong")}),r.value=!1}finally{r.value=!1}}return{databaseData:p,database_connection:u,isSaving:r,getDatabaseConfig:l,next:v}}};function Ke(i,V,u,r,n,c){const o=b("BaseWizardStep");return q(),F(o,{title:i.$t("wizard.database.database"),description:i.$t("wizard.database.desc"),"step-container":"w-full p-8 mb-8 bg-white border border-gray-200 border-solid rounded md:w-full"},{default:d(()=>[(q(),F(de(r.databaseData.database_connection),{"config-data":r.databaseData,"is-saving":r.isSaving,onOnChangeDriver:r.getDatabaseConfig,onSubmitData:r.next},null,40,["config-data","is-saving","onOnChangeDriver","onSubmitData"]))]),_:1},8,["title","description"])}var He=oe(Je,[["render",Ke]]);const Qe={class:"w-full md:w-2/3"},ea=B("p",{class:"mt-4 mb-0 text-sm text-gray-600"},"Notes:",-1),aa=B("ul",{class:"w-full text-gray-600 list-disc list-inside"},[B("li",{class:"text-sm leading-8"},[P(" App domain should not contain "),B("b",{class:"inline-block px-1 bg-gray-100 rounded-sm"},"https://"),P(" or "),B("b",{class:"inline-block px-1 bg-gray-100 rounded-sm"},"http"),P(" in front of the domain. ")]),B("li",{class:"text-sm leading-8"},[P(" If you're accessing the website on a different port, please mention the port. For example: "),B("b",{class:"inline-block px-1 bg-gray-100"},"localhost:8080")])],-1),ta={__name:"Step4VerifyDomain",emits:["next"],setup(i,{emit:V}){const u=j({app_domain:window.location.origin.replace(/(^\w+:|^)\/\//,"")}),r=M(!1),{t:n}=G.useI18n(),c=ae("utils"),o=t=>c.checkValidDomainUrl(t),p=A(),l=re(),v={app_domain:{required:y.withMessage(n("validation.required"),D),isUrl:y.withMessage(n("validation.invalid_domain_url"),o)}},s=R(v,z(()=>u));async function I(){if(s.value.$touch(),s.value.$invalid)return!0;r.value=!0;try{await p.setInstallationDomain(u),await p.installationLogin(),(await p.checkAutheticated()).data&&V("next",4),r.value=!1}catch{l.showNotification({type:"error",message:n("wizard.verify_domain.failed")}),r.value=!1}}return(t,g)=>{const $=b("BaseInput"),C=b("BaseInputGroup"),m=b("BaseButton"),_=b("BaseWizardStep");return q(),F(_,{title:t.$t("wizard.verify_domain.title"),description:t.$t("wizard.verify_domain.desc")},{default:d(()=>[B("div",Qe,[a(C,{label:t.$t("wizard.verify_domain.app_domain"),error:e(s).app_domain.$error&&e(s).app_domain.$errors[0].$message,required:""},{default:d(()=>[a($,{modelValue:u.app_domain,"onUpdate:modelValue":g[0]||(g[0]=f=>u.app_domain=f),invalid:e(s).app_domain.$error,type:"text",onInput:g[1]||(g[1]=f=>e(s).app_domain.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),ea,aa,a(m,{loading:r.value,disabled:r.value,class:"mt-8",onClick:I},{default:d(()=>[P(U(t.$t("wizard.verify_domain.verify_now")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["title","description"])}}},na=["onSubmit"],ia={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},oa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ra={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},la={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},sa={__name:"SmtpMailDriver",props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:V}){let u=M(!1);const r=j(["tls","ssl","starttls"]),{t:n}=G.useI18n(),c=Q(),o=z(()=>c.smtpConfig),p=z(()=>u.value?"text":"password");o.value.mail_driver="smtp";const l=z(()=>({smtpConfig:{mail_driver:{required:y.withMessage(n("validation.required"),D)},mail_host:{required:y.withMessage(n("validation.required"),D)},mail_port:{required:y.withMessage(n("validation.required"),D),numeric:y.withMessage(n("validation.numbers_only"),te)},mail_encryption:{required:y.withMessage(n("validation.required"),D)},from_mail:{required:y.withMessage(n("validation.required"),D),email:y.withMessage(n("validation.email_incorrect"),H)},from_name:{required:y.withMessage(n("validation.required"),D)}}})),v=R(l,z(()=>c));async function s(){return v.value.$touch(),v.value.$invalid||V("submit-data",c.smtpConfig),!1}function I(){v.value.smtpConfig.mail_driver.$touch(),V("on-change-driver",c.smtpConfig.mail_driver)}return(t,g)=>{const $=b("BaseMultiselect"),C=b("BaseInputGroup"),m=b("BaseInput"),_=b("BaseIcon"),f=b("BaseButton");return q(),k("form",{onSubmit:W(s,["prevent"])},[B("div",ia,[a(C,{label:t.$t("wizard.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(v).smtpConfig.mail_driver.$error&&e(v).smtpConfig.mail_driver.$errors[0].$message,required:""},{default:d(()=>[a($,{modelValue:o.value.mail_driver,"onUpdate:modelValue":[g[0]||(g[0]=w=>o.value.mail_driver=w),I],options:e(c).mail_drivers,"can-deselect":!1,"content-loading":i.isFetchingInitialData,invalid:e(v).smtpConfig.mail_driver.$error},null,8,["modelValue","options","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(C,{label:t.$t("wizard.mail.host"),"content-loading":i.isFetchingInitialData,error:e(v).smtpConfig.mail_host.$error&&e(v).smtpConfig.mail_host.$errors[0].$message,required:""},{default:d(()=>[a(m,{modelValue:o.value.mail_host,"onUpdate:modelValue":g[1]||(g[1]=w=>o.value.mail_host=w),modelModifiers:{trim:!0},invalid:e(v).smtpConfig.mail_host.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_host",onInput:g[2]||(g[2]=w=>e(v).smtpConfig.mail_host.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),B("div",oa,[a(C,{label:t.$t("wizard.mail.username"),"content-loading":i.isFetchingInitialData},{default:d(()=>[a(m,{modelValue:o.value.mail_username,"onUpdate:modelValue":g[3]||(g[3]=w=>o.value.mail_username=w),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"db_name"},null,8,["modelValue","content-loading"])]),_:1},8,["label","content-loading"]),a(C,{label:t.$t("wizard.mail.password"),"content-loading":i.isFetchingInitialData},{default:d(()=>[a(m,{modelValue:o.value.mail_password,"onUpdate:modelValue":g[6]||(g[6]=w=>o.value.mail_password=w),modelModifiers:{trim:!0},type:p.value,"content-loading":i.isFetchingInitialData,autocomplete:"off","data-lpignore":"true",name:"password"},{right:d(()=>[e(u)?(q(),F(_,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:g[4]||(g[4]=w=>Z(u)?u.value=!e(u):u=!e(u))})):(q(),F(_,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:g[5]||(g[5]=w=>Z(u)?u.value=!e(u):u=!e(u))}))]),_:1},8,["modelValue","type","content-loading"])]),_:1},8,["label","content-loading"])]),B("div",ra,[a(C,{label:t.$t("wizard.mail.port"),error:e(v).smtpConfig.mail_port.$error&&e(v).smtpConfig.mail_port.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:d(()=>[a(m,{modelValue:o.value.mail_port,"onUpdate:modelValue":g[7]||(g[7]=w=>o.value.mail_port=w),modelModifiers:{trim:!0},invalid:e(v).smtpConfig.mail_port.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_port",onInput:g[8]||(g[8]=w=>e(v).smtpConfig.mail_port.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"]),a(C,{label:t.$t("wizard.mail.encryption"),error:e(v).smtpConfig.mail_encryption.$error&&e(v).smtpConfig.mail_encryption.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:d(()=>[a($,{modelValue:o.value.mail_encryption,"onUpdate:modelValue":g[9]||(g[9]=w=>o.value.mail_encryption=w),modelModifiers:{trim:!0},options:r,"can-deselect":!1,invalid:e(v).smtpConfig.mail_encryption.$error,"content-loading":i.isFetchingInitialData,onInput:g[10]||(g[10]=w=>e(v).smtpConfig.mail_encryption.$touch())},null,8,["modelValue","options","invalid","content-loading"])]),_:1},8,["label","error","content-loading"])]),B("div",la,[a(C,{label:t.$t("wizard.mail.from_mail"),error:e(v).smtpConfig.from_mail.$error&&e(v).smtpConfig.from_mail.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:d(()=>[a(m,{modelValue:o.value.from_mail,"onUpdate:modelValue":g[11]||(g[11]=w=>o.value.from_mail=w),modelModifiers:{trim:!0},invalid:e(v).smtpConfig.from_mail.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"from_mail",onInput:g[12]||(g[12]=w=>e(v).smtpConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"]),a(C,{label:t.$t("wizard.mail.from_name"),error:e(v).smtpConfig.from_name.$error&&e(v).smtpConfig.from_name.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:d(()=>[a(m,{modelValue:o.value.from_name,"onUpdate:modelValue":g[13]||(g[13]=w=>o.value.from_name=w),modelModifiers:{trim:!0},invalid:e(v).smtpConfig.from_name.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"from_name",onInput:g[14]||(g[14]=w=>e(v).smtpConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"])]),a(f,{loading:i.isSaving,disabled:i.isSaving,"content-loading":i.isFetchingInitialData,class:"mt-4"},{left:d(w=>[i.isSaving?E("",!0):(q(),F(_,{key:0,name:"SaveIcon",class:O(w.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(t.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],40,na)}}},da=["onSubmit"],ua={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 lg:mb-6 md:mb-6"},ma={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 lg:mb-6 md:mb-6"},ca={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},ga={__name:"MailgunMailDriver",props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:V}){let u=M(!1);const r=Q(),{t:n}=G.useI18n(),c=z(()=>r.mailgunConfig),o=z(()=>u.value?"text":"password");c.value.mail_driver="mailgun";const p=z(()=>({mailgunConfig:{mail_driver:{required:y.withMessage(n("validation.required"),D)},mail_mailgun_domain:{required:y.withMessage(n("validation.required"),D)},mail_mailgun_endpoint:{required:y.withMessage(n("validation.required"),D)},mail_mailgun_secret:{required:y.withMessage(n("validation.required"),D)},from_mail:{required:y.withMessage(n("validation.required"),D),email:H},from_name:{required:y.withMessage(n("validation.required"),D)}}})),l=R(p,z(()=>r));function v(){return l.value.$touch(),l.value.$invalid||V("submit-data",r.mailgunConfig),!1}function s(){l.value.mailgunConfig.mail_driver.$touch(),V("on-change-driver",r.mailgunConfig.mail_driver)}return(I,t)=>{const g=b("BaseMultiselect"),$=b("BaseInputGroup"),C=b("BaseInput"),m=b("BaseIcon"),_=b("BaseButton");return q(),k("form",{onSubmit:W(v,["prevent"])},[B("div",ua,[a($,{label:I.$t("wizard.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.mail_driver.$error&&e(l).mailgunConfig.mail_driver.$errors[0].$message,required:""},{default:d(()=>[a(g,{modelValue:c.value.mail_driver,"onUpdate:modelValue":[t[0]||(t[0]=f=>c.value.mail_driver=f),s],options:e(r).mail_drivers,"can-deselect":!1,invalid:e(l).mailgunConfig.mail_driver.$error,"content-loading":i.isFetchingInitialData},null,8,["modelValue","options","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a($,{label:I.$t("wizard.mail.mailgun_domain"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.mail_mailgun_domain.$error&&e(l).mailgunConfig.mail_mailgun_domain.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:c.value.mail_mailgun_domain,"onUpdate:modelValue":t[1]||(t[1]=f=>c.value.mail_mailgun_domain=f),modelModifiers:{trim:!0},invalid:e(l).mailgunConfig.mail_mailgun_domain.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mailgun_domain",onInput:t[2]||(t[2]=f=>e(l).mailgunConfig.mail_mailgun_domain.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),B("div",ma,[a($,{label:I.$t("wizard.mail.mailgun_secret"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.mail_mailgun_secret.$error&&e(l).mailgunConfig.mail_mailgun_secret.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:c.value.mail_mailgun_secret,"onUpdate:modelValue":t[5]||(t[5]=f=>c.value.mail_mailgun_secret=f),modelModifiers:{trim:!0},invalid:e(l).mailgunConfig.mail_mailgun_secret.$error,type:o.value,"content-loading":i.isFetchingInitialData,name:"mailgun_secret",autocomplete:"off","data-lpignore":"true",onInput:t[6]||(t[6]=f=>e(l).mailgunConfig.mail_mailgun_secret.$touch())},{right:d(()=>[e(u)?(q(),F(m,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:t[3]||(t[3]=f=>Z(u)?u.value=!e(u):u=!e(u))})):(q(),F(m,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:t[4]||(t[4]=f=>Z(u)?u.value=!e(u):u=!e(u))}))]),_:1},8,["modelValue","invalid","type","content-loading"])]),_:1},8,["label","content-loading","error"]),a($,{label:I.$t("wizard.mail.mailgun_endpoint"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.mail_mailgun_endpoint.$error&&e(l).mailgunConfig.mail_mailgun_endpoint.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:c.value.mail_mailgun_endpoint,"onUpdate:modelValue":t[7]||(t[7]=f=>c.value.mail_mailgun_endpoint=f),modelModifiers:{trim:!0},invalid:e(l).mailgunConfig.mail_mailgun_endpoint.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mailgun_endpoint",onInput:t[8]||(t[8]=f=>e(l).mailgunConfig.mail_mailgun_endpoint.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),B("div",ca,[a($,{label:I.$t("wizard.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.from_mail.$error&&e(l).mailgunConfig.from_mail.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:c.value.from_mail,"onUpdate:modelValue":t[9]||(t[9]=f=>c.value.from_mail=f),modelModifiers:{trim:!0},name:"from_mail",type:"text",invalid:e(l).mailgunConfig.from_mail.$error,"content-loading":i.isFetchingInitialData,onInput:t[10]||(t[10]=f=>e(l).mailgunConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a($,{label:I.$t("wizard.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.from_name.$error&&e(l).mailgunConfig.from_name.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:c.value.from_name,"onUpdate:modelValue":t[11]||(t[11]=f=>c.value.from_name=f),modelModifiers:{trim:!0},invalid:e(l).mailgunConfig.from_name.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"from_name",onInput:t[12]||(t[12]=f=>e(l).mailgunConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),a(_,{loading:I.loading,disabled:i.isSaving,"content-loading":i.isFetchingInitialData,class:"mt-4"},{left:d(f=>[i.isSaving?E("",!0):(q(),F(m,{key:0,name:"SaveIcon",class:O(f.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(I.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],40,da)}}},pa=["onSubmit"],va={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},fa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},_a={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ba={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},$a={__name:"SesMailDriver",props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:V}){const{t:u}=G.useI18n(),r=j(["tls","ssl","starttls"]);let n=M(!1);const c=Q(),o=z(()=>c.sesConfig);o.value.mail_driver="ses";const p=z(()=>({sesConfig:{mail_driver:{required:y.withMessage(u("validation.required"),D)},mail_host:{required:y.withMessage(u("validation.required"),D)},mail_port:{required:y.withMessage(u("validation.required"),D),numeric:te},mail_ses_key:{required:y.withMessage(u("validation.required"),D)},mail_ses_secret:{required:y.withMessage(u("validation.required"),D)},mail_encryption:{required:y.withMessage(u("validation.required"),D)},from_mail:{required:y.withMessage(u("validation.required"),D),email:y.withMessage(u("validation.email_incorrect"),H)},from_name:{required:y.withMessage(u("validation.required"),D)}}})),l=R(p,z(()=>c));async function v(){return l.value.$touch(),l.value.$invalid||V("submit-data",c.sesConfig),!1}function s(){l.value.sesConfig.mail_driver.$touch(),V("on-change-driver",c.sesConfig.mail_driver)}return(I,t)=>{const g=b("BaseMultiselect"),$=b("BaseInputGroup"),C=b("BaseInput"),m=b("BaseIcon"),_=b("BaseButton");return q(),k("form",{onSubmit:W(v,["prevent"])},[B("div",va,[a($,{label:I.$t("wizard.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_driver.$error&&e(l).sesConfig.mail_driver.$errors[0].$message,required:""},{default:d(()=>[a(g,{modelValue:o.value.mail_driver,"onUpdate:modelValue":[t[0]||(t[0]=f=>o.value.mail_driver=f),s],options:e(c).mail_drivers,"can-deselect":!1,"content-loading":i.isFetchingInitialData,invalid:e(l).sesConfig.mail_driver.$error},null,8,["modelValue","options","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a($,{label:I.$t("wizard.mail.host"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_host.$error&&e(l).sesConfig.mail_host.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:o.value.mail_host,"onUpdate:modelValue":t[1]||(t[1]=f=>o.value.mail_host=f),modelModifiers:{trim:!0},invalid:e(l).sesConfig.mail_host.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_host",onInput:t[2]||(t[2]=f=>e(l).sesConfig.mail_host.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),B("div",fa,[a($,{label:I.$t("wizard.mail.port"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_port.$error&&e(l).sesConfig.mail_port.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:o.value.mail_port,"onUpdate:modelValue":t[3]||(t[3]=f=>o.value.mail_port=f),modelModifiers:{trim:!0},invalid:e(l).sesConfig.mail_port.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_port",onInput:t[4]||(t[4]=f=>e(l).sesConfig.mail_port.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a($,{label:I.$t("wizard.mail.encryption"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_encryption.$error&&e(l).sesConfig.mail_encryption.$errors[0].$message,required:""},{default:d(()=>[a(g,{modelValue:o.value.mail_encryption,"onUpdate:modelValue":t[5]||(t[5]=f=>o.value.mail_encryption=f),modelModifiers:{trim:!0},invalid:e(l).sesConfig.mail_encryption.$error,options:r,"content-loading":i.isFetchingInitialData,onInput:t[6]||(t[6]=f=>e(l).sesConfig.mail_encryption.$touch())},null,8,["modelValue","invalid","options","content-loading"])]),_:1},8,["label","content-loading","error"])]),B("div",_a,[a($,{label:I.$t("wizard.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.from_mail.$error&&e(l).sesConfig.from_mail.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:o.value.from_mail,"onUpdate:modelValue":t[7]||(t[7]=f=>o.value.from_mail=f),modelModifiers:{trim:!0},invalid:e(l).sesConfig.from_mail.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"from_mail",onInput:t[8]||(t[8]=f=>e(l).sesConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a($,{label:I.$t("wizard.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.from_name.$error&&e(l).sesConfig.from_name.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:o.value.from_name,"onUpdate:modelValue":t[9]||(t[9]=f=>o.value.from_name=f),modelModifiers:{trim:!0},invalid:e(l).sesConfig.from_name.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"name",onInput:t[10]||(t[10]=f=>e(l).sesConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),B("div",ba,[a($,{label:I.$t("wizard.mail.ses_key"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_ses_key.$error&&e(l).sesConfig.mail_ses_key.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:o.value.mail_ses_key,"onUpdate:modelValue":t[11]||(t[11]=f=>o.value.mail_ses_key=f),modelModifiers:{trim:!0},invalid:e(l).sesConfig.mail_ses_key.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_ses_key",onInput:t[12]||(t[12]=f=>e(l).sesConfig.mail_ses_key.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a($,{label:I.$t("wizard.mail.ses_secret"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_ses_secret.$error&&e(l).sesConfig.mail_ses_secret.$errors[0].$message,required:""},{default:d(()=>[a(C,{modelValue:o.value.mail_ses_secret,"onUpdate:modelValue":t[15]||(t[15]=f=>o.value.mail_ses_secret=f),modelModifiers:{trim:!0},invalid:e(l).sesConfig.mail_ses_secret.$error,type:I.getInputType,"content-loading":i.isFetchingInitialData,name:"mail_ses_secret",autocomplete:"off","data-lpignore":"true",onInput:t[16]||(t[16]=f=>e(l).sesConfig.mail_ses_secret.$touch())},{right:d(()=>[e(n)?(q(),F(m,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:t[13]||(t[13]=f=>Z(n)?n.value=!e(n):n=!e(n))})):(q(),F(m,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:t[14]||(t[14]=f=>Z(n)?n.value=!e(n):n=!e(n))}))]),_:1},8,["modelValue","invalid","type","content-loading"])]),_:1},8,["label","content-loading","error"])]),a(_,{loading:i.isSaving,disabled:i.isSaving,"content-loading":i.isFetchingInitialData,class:"mt-4"},{left:d(f=>[i.isSaving?E("",!0):(q(),F(m,{key:0,name:"SaveIcon",class:O(f.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(I.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],40,pa)}}},wa=["onSubmit"],ha={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ya={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},me={__name:"BasicMailDriver",props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:V}){const{t:u}=G.useI18n(),r=Q(),n=z(()=>r.basicMailConfig);z(()=>r.mail_drivers),n.value.mail_driver="mail";const c=z(()=>({basicMailConfig:{mail_driver:{required:y.withMessage(u("validation.required"),D)},from_mail:{required:y.withMessage(u("validation.required"),D),email:y.withMessage(u("validation.email_incorrect"),H)},from_name:{required:y.withMessage(u("validation.required"),D)}}})),o=R(c,z(()=>r));function p(){return o.value.$touch(),o.value.$invalid||V("submit-data",r.basicMailConfig),!1}function l(){o.value.basicMailConfig.mail_driver.$touch(),V("on-change-driver",r?.basicMailConfig?.mail_driver)}return(v,s)=>{const I=b("BaseMultiselect"),t=b("BaseInputGroup"),g=b("BaseInput"),$=b("BaseIcon"),C=b("BaseButton");return q(),k("form",{onSubmit:W(p,["prevent"])},[B("div",ha,[a(t,{label:v.$t("wizard.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(o).basicMailConfig.mail_driver.$error&&e(o).basicMailConfig.mail_driver.$errors[0].$message,required:""},{default:d(()=>[a(I,{modelValue:n.value.mail_driver,"onUpdate:modelValue":[s[0]||(s[0]=m=>n.value.mail_driver=m),l],invalid:e(o).basicMailConfig.mail_driver.$error,options:e(r).mail_drivers,"can-deselect":!1,"content-loading":i.isFetchingInitialData},null,8,["modelValue","invalid","options","content-loading"])]),_:1},8,["label","content-loading","error"])]),B("div",ya,[a(t,{label:v.$t("wizard.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(o).basicMailConfig.from_name.$error&&e(o).basicMailConfig.from_name.$errors[0].$message,required:""},{default:d(()=>[a(g,{modelValue:n.value.from_name,"onUpdate:modelValue":s[1]||(s[1]=m=>n.value.from_name=m),modelModifiers:{trim:!0},invalid:e(o).basicMailConfig.from_name.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"name",onInput:s[2]||(s[2]=m=>e(o).basicMailConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a(t,{label:v.$t("wizard.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(o).basicMailConfig.from_mail.$error&&e(o).basicMailConfig.from_mail.$errors[0].$message,required:""},{default:d(()=>[a(g,{modelValue:n.value.from_mail,"onUpdate:modelValue":s[3]||(s[3]=m=>n.value.from_mail=m),modelModifiers:{trim:!0},invalid:e(o).basicMailConfig.from_mail.$error,"content-loading":i.isFetchingInitialData,type:"text",onInput:s[4]||(s[4]=m=>e(o).basicMailConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),a(C,{loading:i.isSaving,disabled:i.isSaving,"content-loading":i.isFetchingInitialData,class:"mt-4"},{left:d(m=>[i.isSaving?E("",!0):(q(),F($,{key:0,name:"SaveIcon",class:O(m.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(v.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],40,wa)}}},Ia={components:{Smtp:sa,Mailgun:ga,Ses:$a,sendmail:me,Mail:me},emits:["next"],setup(i,{emit:V}){const u=M(!1),r=M(!1),n=Q();n.mail_driver="mail",o();function c(l){n.mail_driver=l}async function o(){r.value=!0,await n.fetchMailDrivers(),r.value=!1}async function p(l){u.value=!0;let v=await n.updateMailConfig(l);u.value=!1,v.data.success&&await V("next",5)}return{mailDriverStore:n,isSaving:u,isFetchingInitialData:r,changeDriver:c,next:p}}};function qa(i,V,u,r,n,c){const o=b("BaseWizardStep");return q(),F(o,{title:i.$t("wizard.mail.mail_config"),description:i.$t("wizard.mail.mail_config_desc")},{default:d(()=>[B("form",{action:"",onSubmit:V[1]||(V[1]=W((...p)=>r.next&&r.next(...p),["prevent"]))},[(q(),F(de(r.mailDriverStore.mail_driver),{"config-data":r.mailDriverStore.mailConfigData,"is-saving":r.isSaving,"is-fetching-initial-data":r.isFetchingInitialData,onOnChangeDriver:V[0]||(V[0]=p=>r.changeDriver(p)),onSubmitData:r.next},null,40,["config-data","is-saving","is-fetching-initial-data","onSubmitData"]))],32)]),_:1},8,["title","description"])}var Ca=oe(Ia,[["render",qa]]);const Ba=["onSubmit"],Va={class:"grid grid-cols-1 mb-4 md:grid-cols-2 md:mb-6"},Da={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Sa={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},Fa={__name:"Step6AccountSettings",emits:["next"],setup(i,{emit:V}){let u=M(!1);const r=M(!1),n=M(!1);let c=M(""),o=M(null);const p=ge(),l=ee(),{t:v}=G.useI18n(),s=z(()=>p.userForm),I=z(()=>({userForm:{name:{required:y.withMessage(v("validation.required"),D)},email:{required:y.withMessage(v("validation.required"),D),email:y.withMessage(v("validation.email_incorrect"),H)},password:{required:y.withMessage(v("validation.required"),D),minLength:y.withMessage(v("validation.password_min_length",{count:8}),be(8))},confirm_password:{required:y.withMessage(v("validation.required"),$e(p.userForm.password)),sameAsPassword:y.withMessage(v("validation.password_incorrect"),we(p.userForm.password))}}})),t=R(I,z(()=>p));function g(m,_){o.value=_}function $(){o.value=null}async function C(){if(t.value.userForm.$touch(),t.value.userForm.$invalid)return!0;u.value=!0;let m=await p.updateCurrentUser(s.value);if(u.value=!1,m.data.data){if(o.value){let f=new FormData;f.append("admin_avatar",o.value),await p.uploadAvatar(f)}const _=m.data.data.companies[0];await l.setSelectedCompany(_),V("next",6)}}return(m,_)=>{const f=b("BaseFileUploader"),w=b("BaseInputGroup"),h=b("BaseInput"),x=b("EyeOffIcon"),Y=b("EyeIcon"),X=b("BaseIcon"),J=b("BaseButton"),N=b("BaseWizardStep");return q(),F(N,{title:m.$t("wizard.account_info"),description:m.$t("wizard.account_info_desc")},{default:d(()=>[B("form",{action:"",onSubmit:W(C,["prevent"])},[B("div",Va,[a(w,{label:m.$tc("settings.account_settings.profile_picture")},{default:d(()=>[a(f,{avatar:!0,"preview-image":e(c),onChange:g,onRemove:$},null,8,["preview-image"])]),_:1},8,["label"])]),B("div",Da,[a(w,{label:m.$t("wizard.name"),error:e(t).userForm.name.$error&&e(t).userForm.name.$errors[0].$message,required:""},{default:d(()=>[a(h,{modelValue:s.value.name,"onUpdate:modelValue":_[0]||(_[0]=S=>s.value.name=S),modelModifiers:{trim:!0},invalid:e(t).userForm.name.$error,type:"text",name:"name",onInput:_[1]||(_[1]=S=>e(t).userForm.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(w,{label:m.$t("wizard.email"),error:e(t).userForm.email.$error&&e(t).userForm.email.$errors[0].$message,required:""},{default:d(()=>[a(h,{modelValue:s.value.email,"onUpdate:modelValue":_[2]||(_[2]=S=>s.value.email=S),modelModifiers:{trim:!0},invalid:e(t).userForm.email.$error,type:"text",name:"email",onInput:_[3]||(_[3]=S=>e(t).userForm.email.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),B("div",Sa,[a(w,{label:m.$t("wizard.password"),error:e(t).userForm.password.$error&&e(t).userForm.password.$errors[0].$message,required:""},{default:d(()=>[a(h,{modelValue:s.value.password,"onUpdate:modelValue":_[6]||(_[6]=S=>s.value.password=S),modelModifiers:{trim:!0},invalid:e(t).userForm.password.$error,type:r.value?"text":"password",name:"password",onInput:_[7]||(_[7]=S=>e(t).userForm.password.$touch())},{right:d(()=>[r.value?(q(),F(x,{key:0,class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[4]||(_[4]=S=>r.value=!r.value)})):(q(),F(Y,{key:1,class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[5]||(_[5]=S=>r.value=!r.value)}))]),_:1},8,["modelValue","invalid","type"])]),_:1},8,["label","error"]),a(w,{label:m.$t("wizard.confirm_password"),error:e(t).userForm.confirm_password.$error&&e(t).userForm.confirm_password.$errors[0].$message,required:""},{default:d(()=>[a(h,{modelValue:s.value.confirm_password,"onUpdate:modelValue":_[10]||(_[10]=S=>s.value.confirm_password=S),modelModifiers:{trim:!0},invalid:e(t).userForm.confirm_password.$error,type:n.value?"text":"password",name:"confirm_password",onInput:_[11]||(_[11]=S=>e(t).userForm.confirm_password.$touch())},{right:d(()=>[n.value?(q(),F(X,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[8]||(_[8]=S=>n.value=!n.value)})):(q(),F(X,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[9]||(_[9]=S=>n.value=!n.value)}))]),_:1},8,["modelValue","invalid","type"])]),_:1},8,["label","error"])]),a(J,{loading:e(u),disabled:e(u),class:"mt-4"},{left:d(S=>[e(u)?E("",!0):(q(),F(X,{key:0,name:"SaveIcon",class:O(S.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(m.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],40,Ba)]),_:1},8,["title","description"])}}},Ma=["onSubmit"],za={class:"grid grid-cols-1 mb-4 md:grid-cols-2 md:mb-6"},ka={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Ua={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Pa={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},Na={__name:"Step7CompanyInfo",emits:["next"],setup(i,{emit:V}){let u=M(!1),r=M(!1);const{t:n}=G.useI18n();let c=M(null),o=M(null),p=M(null);const l=j({name:null,address:{address_street_1:"",address_street_2:"",website:"",country_id:null,state:"",city:"",phone:"",zip:""}}),v=ee(),s=pe();K(async()=>{u.value=!0,await s.fetchCountries(),u.value=!1,l.address.country_id=s.countries.find(m=>m.code=="US")?.id});const I={companyForm:{name:{required:y.withMessage(n("validation.required"),D)},address:{country_id:{required:y.withMessage(n("validation.required"),D)},address_street_1:{maxLength:y.withMessage(n("validation.address_maxlength",{count:255}),ue(255))},address_street_2:{maxLength:y.withMessage(n("validation.address_maxlength",{count:255}),ue(255))}}}},t=R(I,{companyForm:l});function g(m,_,f,w){p.value=w.name,o.value=_}function $(){o.value=null}async function C(){if(t.value.companyForm.$touch(),t.value.$invalid)return!0;if(r.value=!0,v.updateCompany(l)){if(o.value){let _=new FormData;_.append("company_logo",JSON.stringify({name:p.value,data:o.value})),await v.updateCompanyLogo(_)}r.value=!1,V("next",7)}}return(m,_)=>{const f=b("BaseFileUploader"),w=b("BaseInputGroup"),h=b("BaseInput"),x=b("BaseMultiselect"),Y=b("BaseTextarea"),X=b("BaseIcon"),J=b("BaseButton"),N=b("BaseWizardStep");return q(),F(N,{title:m.$t("wizard.company_info"),description:m.$t("wizard.company_info_desc"),"step-container":"bg-white border border-gray-200 border-solid mb-8 md:w-full p-8 rounded w-full"},{default:d(()=>[B("form",{action:"",onSubmit:W(C,["prevent"])},[B("div",za,[a(w,{label:m.$tc("settings.company_info.company_logo")},{default:d(()=>[a(f,{base64:"","preview-image":e(c),onChange:g,onRemove:$},null,8,["preview-image"])]),_:1},8,["label"])]),B("div",ka,[a(w,{label:m.$t("wizard.company_name"),error:e(t).companyForm.name.$error&&e(t).companyForm.name.$errors[0].$message,required:""},{default:d(()=>[a(h,{modelValue:l.name,"onUpdate:modelValue":_[0]||(_[0]=S=>l.name=S),modelModifiers:{trim:!0},invalid:e(t).companyForm.name.$error,type:"text",name:"name",onInput:_[1]||(_[1]=S=>e(t).companyForm.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(w,{label:m.$t("wizard.country"),error:e(t).companyForm.address.country_id.$error&&e(t).companyForm.address.country_id.$errors[0].$message,"content-loading":e(u),required:""},{default:d(()=>[a(x,{modelValue:l.address.country_id,"onUpdate:modelValue":_[2]||(_[2]=S=>l.address.country_id=S),label:"name",invalid:e(t).companyForm.address.country_id.$error,options:e(s).countries,"value-prop":"id","can-deselect":!1,"can-clear":!1,"content-loading":e(u),placeholder:m.$t("general.select_country"),searchable:"","track-by":"name"},null,8,["modelValue","invalid","options","content-loading","placeholder"])]),_:1},8,["label","error","content-loading"])]),B("div",Ua,[a(w,{label:m.$t("wizard.state")},{default:d(()=>[a(h,{modelValue:l.address.state,"onUpdate:modelValue":_[3]||(_[3]=S=>l.address.state=S),name:"state",type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),a(w,{label:m.$t("wizard.city")},{default:d(()=>[a(h,{modelValue:l.address.city,"onUpdate:modelValue":_[4]||(_[4]=S=>l.address.city=S),name:"city",type:"text"},null,8,["modelValue"])]),_:1},8,["label"])]),B("div",Pa,[B("div",null,[a(w,{label:m.$t("wizard.address"),error:e(t).companyForm.address.address_street_1.$error&&e(t).companyForm.address.address_street_1.$errors[0].$message},{default:d(()=>[a(Y,{modelValue:l.address.address_street_1,"onUpdate:modelValue":_[5]||(_[5]=S=>l.address.address_street_1=S),modelModifiers:{trim:!0},invalid:e(t).companyForm.address.address_street_1.$error,placeholder:m.$t("general.street_1"),name:"billing_street1",rows:"2",onInput:_[6]||(_[6]=S=>e(t).companyForm.address.address_street_1.$touch())},null,8,["modelValue","invalid","placeholder"])]),_:1},8,["label","error"]),a(w,{error:e(t).companyForm.address.address_street_2.$error&&e(t).companyForm.address.address_street_2.$errors[0].$message,class:"mt-1 lg:mt-2 md:mt-2"},{default:d(()=>[a(Y,{modelValue:l.address.address_street_2,"onUpdate:modelValue":_[7]||(_[7]=S=>l.address.address_street_2=S),invalid:e(t).companyForm.address.address_street_2.$error,placeholder:m.$t("general.street_2"),name:"billing_street2",rows:"2",onInput:_[8]||(_[8]=S=>e(t).companyForm.address.address_street_2.$touch())},null,8,["modelValue","invalid","placeholder"])]),_:1},8,["error"])]),B("div",null,[a(w,{label:m.$t("wizard.zip_code")},{default:d(()=>[a(h,{modelValue:l.address.zip,"onUpdate:modelValue":_[9]||(_[9]=S=>l.address.zip=S),modelModifiers:{trim:!0},type:"text",name:"zip"},null,8,["modelValue"])]),_:1},8,["label"]),a(w,{label:m.$t("wizard.phone"),class:"mt-4"},{default:d(()=>[a(h,{modelValue:l.address.phone,"onUpdate:modelValue":_[10]||(_[10]=S=>l.address.phone=S),modelModifiers:{trim:!0},type:"text",name:"phone"},null,8,["modelValue"])]),_:1},8,["label"])])]),a(J,{loading:e(r),disabled:e(r),class:"mt-4"},{left:d(S=>[e(r)?E("",!0):(q(),F(X,{key:0,name:"SaveIcon",class:O(S.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(m.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],40,Ma)]),_:1},8,["title","description"])}}},Ea=["onSubmit"],Ga={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Oa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},xa={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},La={__name:"Step8CompanyPreferences",emits:["next"],setup(i,{emit:V}){const u=M(!1);let r=M(!1),n=j({currency:1,language:"en",carbon_date_format:"d M Y",time_zone:"UTC",fiscal_year:"1-12"});const{tm:c,t:o}=G.useI18n(),p=ve();r.value=!0,j([{title:c("settings.customization.invoices.allow"),value:"allow"},{title:c("settings.customization.invoices.disable_on_invoice_partial_paid"),value:"disable_on_invoice_partial_paid"},{title:c("settings.customization.invoices.disable_on_invoice_paid"),value:"disable_on_invoice_paid"},{title:c("settings.customization.invoices.disable_on_invoice_sent"),value:"disable_on_invoice_sent"}]);const l=ce(),v=pe(),s=ee(),I=ge(),t=re();let g={key:"fiscal_years"},$={key:"languages"};r.value=!0,Promise.all([v.fetchCurrencies(),v.fetchDateFormats(),v.fetchTimeZones(),v.fetchCountries(),v.fetchConfig(g),v.fetchConfig($)]).then(([f])=>{r.value=!1});const C=z(()=>({currentPreferences:{currency:{required:y.withMessage(o("validation.required"),D)},language:{required:y.withMessage(o("validation.required"),D)},carbon_date_format:{required:y.withMessage(o("validation.required"),D)},time_zone:{required:y.withMessage(o("validation.required"),D)},fiscal_year:{required:y.withMessage(o("validation.required"),D)}}})),m=R(C,{currentPreferences:n});async function _(){if(m.value.currentPreferences.$touch(),m.value.$invalid)return!0;l.openDialog({title:o("general.do_you_wish_to_continue"),message:o("wizard.currency_set_alert"),yesLabel:o("general.ok"),noLabel:o("general.cancel"),variant:"danger",size:"lg",hideNoButton:!1}).then(async f=>{if(f){let w={settings:{...n}};u.value=!0,delete w.settings.discount_per_item;let h=await s.updateCompanySettings({data:w});if(h.data){u.value=!1;let x={settings:{language:n.language}};(await I.updateUserSettings(x)).data&&(V("next","COMPLETED"),t.showNotification({type:"success",message:"Login Successful"}),p.push("/admin/dashboard")),_e.set("auth.token",h.data.token)}return!0}return u.value=!1,!0})}return(f,w)=>{const h=b("BaseMultiselect"),x=b("BaseInputGroup"),Y=b("BaseIcon"),X=b("BaseButton"),J=b("BaseWizardStep");return q(),F(J,{title:f.$t("wizard.preferences"),description:f.$t("wizard.preferences_desc"),"step-container":"bg-white border border-gray-200 border-solid mb-8 md:w-full p-8 rounded w-full"},{default:d(()=>[B("form",{action:"",onSubmit:W(_,["prevent"])},[B("div",null,[B("div",Ga,[a(x,{label:f.$t("wizard.currency"),error:e(m).currentPreferences.currency.$error&&e(m).currentPreferences.currency.$errors[0].$message,"content-loading":e(r),required:""},{default:d(()=>[a(h,{modelValue:e(n).currency,"onUpdate:modelValue":w[0]||(w[0]=N=>e(n).currency=N),"content-loading":e(r),options:e(v).currencies,label:"name","value-prop":"id",searchable:!0,"track-by":"name",placeholder:f.$tc("settings.currencies.select_currency"),invalid:e(m).currentPreferences.currency.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"]),a(x,{label:f.$t("settings.preferences.default_language"),error:e(m).currentPreferences.language.$error&&e(m).currentPreferences.language.$errors[0].$message,"content-loading":e(r),required:""},{default:d(()=>[a(h,{modelValue:e(n).language,"onUpdate:modelValue":w[1]||(w[1]=N=>e(n).language=N),"content-loading":e(r),options:e(v).languages,label:"name","value-prop":"code",placeholder:f.$tc("settings.preferences.select_language"),class:"w-full","track-by":"name",searchable:!0,invalid:e(m).currentPreferences.language.$error},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),B("div",Oa,[a(x,{label:f.$t("wizard.date_format"),error:e(m).currentPreferences.carbon_date_format.$error&&e(m).currentPreferences.carbon_date_format.$errors[0].$message,"content-loading":e(r),required:""},{default:d(()=>[a(h,{modelValue:e(n).carbon_date_format,"onUpdate:modelValue":w[2]||(w[2]=N=>e(n).carbon_date_format=N),"content-loading":e(r),options:e(v).dateFormats,label:"display_date","value-prop":"carbon_format_value",placeholder:f.$tc("settings.preferences.select_date_format"),"track-by":"display_date",searchable:"",invalid:e(m).currentPreferences.carbon_date_format.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"]),a(x,{label:f.$t("wizard.time_zone"),error:e(m).currentPreferences.time_zone.$error&&e(m).currentPreferences.time_zone.$errors[0].$message,"content-loading":e(r),required:""},{default:d(()=>[a(h,{modelValue:e(n).time_zone,"onUpdate:modelValue":w[3]||(w[3]=N=>e(n).time_zone=N),"content-loading":e(r),options:e(v).timeZones,label:"key","value-prop":"value",placeholder:f.$tc("settings.preferences.select_time_zone"),"track-by":"key",searchable:!0,invalid:e(m).currentPreferences.time_zone.$error},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),B("div",xa,[a(x,{label:f.$t("wizard.fiscal_year"),error:e(m).currentPreferences.fiscal_year.$error&&e(m).currentPreferences.fiscal_year.$errors[0].$message,"content-loading":e(r),required:""},{default:d(()=>[a(h,{modelValue:e(n).fiscal_year,"onUpdate:modelValue":w[4]||(w[4]=N=>e(n).fiscal_year=N),"content-loading":e(r),options:e(v).fiscalYears,label:"key","value-prop":"value",placeholder:f.$tc("settings.preferences.select_financial_year"),invalid:e(m).currentPreferences.fiscal_year.$error,"track-by":"key",searchable:!0,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),a(X,{loading:u.value,disabled:u.value,"content-loading":e(r),class:"mt-4"},{left:d(N=>[a(Y,{name:"SaveIcon",class:O(N.class)},null,8,["class"])]),default:d(()=>[P(" "+U(f.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled","content-loading"])])],40,Ea)]),_:1},8,["title","description"])}}};var Wa="/img/xcelerate-logo.png";const Ra={components:{step_1:ke,step_2:xe,step_3:He,step_4:ta,step_5:Ca,step_6:Fa,step_7:Na,step_8:La},setup(){let i=M("step_1"),V=M(1);const u=ve(),r=A();n();async function n(){let l=await r.fetchInstallationStep();if(l.data.profile_complete==="COMPLETED"){u.push("/admin/dashboard");return}let v=parseInt(l.data.profile_complete);v&&(V.value=v+1,i.value=`step_${v+1}`)}async function c(l){let v={profile_complete:l};try{return await r.addInstallationStep(v),!0}catch(s){return s?.response?.data?.message==="The MAC is invalid."&&window.location.reload(),!1}}async function o(l){if(l&&!await c(l))return!1;V.value++,V.value<=8&&(i.value="step_"+V.value)}function p(l){}return{stepComponent:i,currentStepNumber:V,onStepChange:o,saveStepProgress:c,onNavClick:p}}},Ta={class:"flex flex-col items-center justify-between w-full pt-10"},ja=B("img",{id:"logo-xcelerate",src:Wa,alt:"Xcelerate Logo",class:"h-12 mb-5 md:mb-10"},null,-1);function Aa(i,V,u,r,n,c){const o=b("BaseWizard");return q(),k("div",Ta,[ja,a(o,{steps:7,"current-step":r.currentStepNumber,onClick:r.onNavClick},{default:d(()=>[(q(),F(de(r.stepComponent),{onNext:r.onStepChange},null,40,["onNext"]))]),_:1},8,["current-step","onClick"])])}var _t=oe(Ra,[["render",Aa]]);export{_t as default};
