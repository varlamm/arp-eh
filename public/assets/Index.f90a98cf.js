import{i as oe,O as o,j as p,k as f,U as e,u,l as t,as as v,X as c,r as B,f as ne,a as D,e as re,o as ue,b as ie,P as g,L as T,bx as z,g as x,R as A,aq as me}from"./@vue.8cc12e6e.js";import{v as H}from"./vue-i18n.c6de3223.js";import{u as ce,b as R}from"./vue-router.746ec05f.js";import{u as M}from"./users.aa10f6e7.js";import{j as O,u as G,e as W}from"./main.f5ac513d.js";import{_ as de}from"./AstronautIcon.ce8aac52.js";import"./@intlify.0be1c2d8.js";import"./vue.a6ed3e81.js";import"./axios.7b768d2b.js";import"./pinia.32c02ade.js";import"./v-tooltip.1cd7a91e.js";import"./vue-resize.0b8cd4b5.js";import"./@popperjs.940d197a.js";import"./lodash.8ab3583e.js";import"./@vuelidate.c7422de1.js";import"./moment.9709ab41.js";import"./guid.7b3dea7e.js";import"./@headlessui.4523e0e1.js";import"./@vueuse.b6c5a1c1.js";import"./prettier.6e0a0647.js";import"./vue-flatpickr-component.30399bbe.js";import"./flatpickr.dff0933c.js";import"./@heroicons.aa650707.js";import"./v-money3.6f830de1.js";import"./maska.1121c2e3.js";const pe={__name:"UserIndexDropdown",props:{row:{type:Object,default:null},table:{type:Object,default:null},loadData:{type:Function,default:null}},setup(w){const U=w,r=O();G();const{t:_}=H.useI18n();W();const y=ce();R();const b=M();oe("utils");function d(i){r.openDialog({title:_("general.are_you_sure"),message:_("users.confirm_delete",1),yesLabel:_("general.ok"),noLabel:_("general.cancel"),variant:"danger",size:"lg",hideNoButton:!1}).then(l=>{l&&b.deleteUser({ids:[i]}).then(h=>{h&&U.loadData&&U.loadData()})})}return(i,l)=>{const h=o("BaseIcon"),$=o("BaseButton"),k=o("BaseDropdownItem"),C=o("router-link"),V=o("BaseDropdown");return p(),f(V,null,{activator:e(()=>[u(y).name==="users.view"?(p(),f($,{key:0,variant:"primary"},{default:e(()=>[t(h,{name:"DotsHorizontalIcon",class:"h-5 text-white"})]),_:1})):(p(),f(h,{key:1,name:"DotsHorizontalIcon",class:"h-5 text-gray-500"}))]),default:e(()=>[t(C,{to:`/admin/users/${w.row.id}/edit`},{default:e(()=>[t(k,null,{default:e(()=>[t(h,{name:"PencilIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),v(" "+c(i.$t("general.edit")),1)]),_:1})]),_:1},8,["to"]),t(k,{onClick:l[0]||(l[0]=S=>d(w.row.id))},{default:e(()=>[t(h,{name:"TrashIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),v(" "+c(i.$t("general.delete")),1)]),_:1})]),_:1})}}},fe={class:"flex items-center justify-end space-x-5"},_e={class:"relative table-container"},he={class:"relative flex items-center justify-end h-5 border-gray-200 border-solid"},ge={class:"flex text-sm font-medium cursor-pointer select-none text-primary-400"},ve={class:"absolute z-10 items-center left-6 top-2.5 select-none"},ye={class:"custom-control custom-checkbox"},Ge={__name:"Index",setup(w){G();const U=O(),r=M(),_=W();R();let y=B(!1),b=B(!0);B(null),B("created_at"),B(!1);const{t:d}=H.useI18n();let i=B(null),l=ne({name:"",email:"",phone:""});const h=D(()=>[{key:"status",thClass:"extra",tdClass:"font-medium text-gray-900",sortable:!1},{key:"name",label:d("users.name"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"email",label:"Email"},{key:"phone",label:d("users.phone")},{key:"created_at",label:d("users.added_on")},{key:"actions",tdClass:"text-right text-sm font-medium",sortable:!1}]),$=D(()=>!r.totalUsers&&!b.value),k=D({get:()=>r.selectedUsers,set:s=>r.selectUser(s)}),C=D({get:()=>r.selectAllField,set:s=>r.setSelectAllState(s)});re(l,()=>{V()},{deep:!0}),ue(()=>{r.fetchUsers(),r.fetchRoles()}),ie(()=>{r.selectAllField&&r.selectAllUsers()});function V(){S()}function S(){i.value&&i.value.refresh()}async function X({page:s,filter:n,sort:I}){let F={display_name:l.name!==null?l.name:"",phone:l.phone!==null?l.phone:"",email:l.email!==null?l.email:"",orderByField:I.fieldName||"created_at",orderBy:I.order||"desc",page:s};b.value=!0;let m=await r.fetchUsers(F);return b.value=!1,{data:m.data.data,pagination:{totalPages:m.data.meta.last_page,currentPage:s,totalCount:m.data.meta.total,limit:10}}}function L(){l.name="",l.email="",l.phone=null}function q(){y.value&&L(),y.value=!y.value}function J(){U.openDialog({title:d("general.are_you_sure"),message:d("users.confirm_delete",2),yesLabel:d("general.ok"),noLabel:d("general.cancel"),variant:"danger",size:"lg",hideNoButton:!1}).then(s=>{s&&r.deleteMultipleUsers().then(n=>{n.data.success&&i.value&&i.value.refresh()})})}return(s,n)=>{const I=o("BaseBreadcrumbItem"),F=o("BaseBreadcrumb"),m=o("BaseIcon"),P=o("BaseButton"),K=o("BasePageHeader"),j=o("BaseInput"),N=o("BaseInputGroup"),Q=o("BaseFilterWrapper"),Y=o("BaseEmptyPlaceholder"),Z=o("BaseDropdownItem"),ee=o("BaseDropdown"),E=o("BaseCheckbox"),te=o("router-link"),ae=o("BaseTable"),se=o("BasePage");return p(),f(se,null,{default:e(()=>[t(K,{title:s.$t("users.title")},{actions:e(()=>[g("div",fe,[T(t(P,{variant:"primary-outline",onClick:q},{right:e(a=>[u(y)?(p(),f(m,{key:1,name:"XIcon",class:x(a.class)},null,8,["class"])):(p(),f(m,{key:0,name:"FilterIcon",class:x(a.class)},null,8,["class"]))]),default:e(()=>[v(c(s.$t("general.filter"))+" ",1)]),_:1},512),[[z,u(r).totalUsers]]),u(_).currentUser.is_owner?(p(),f(P,{key:0,onClick:n[0]||(n[0]=a=>s.$router.push("users/create"))},{left:e(a=>[t(m,{name:"PlusIcon",class:x(a.class),"aria-hidden":"true"},null,8,["class"])]),default:e(()=>[v(" "+c(s.$t("users.add_user")),1)]),_:1})):A("",!0)])]),default:e(()=>[t(F,null,{default:e(()=>[t(I,{title:s.$t("general.home"),to:"dashboard"},null,8,["title"]),t(I,{title:s.$tc("users.title",2),to:"#",active:""},null,8,["title"])]),_:1})]),_:1},8,["title"]),t(Q,{show:u(y),class:"mt-3",onClear:L},{default:e(()=>[t(N,{label:s.$tc("users.name"),class:"flex-1 mt-2 mr-4"},{default:e(()=>[t(j,{modelValue:u(l).name,"onUpdate:modelValue":n[1]||(n[1]=a=>u(l).name=a),type:"text",name:"name",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label"]),t(N,{label:s.$tc("users.email"),class:"flex-1 mt-2 mr-4"},{default:e(()=>[t(j,{modelValue:u(l).email,"onUpdate:modelValue":n[2]||(n[2]=a=>u(l).email=a),type:"text",name:"email",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label"]),t(N,{class:"flex-1 mt-2",label:s.$tc("users.phone")},{default:e(()=>[t(j,{modelValue:u(l).phone,"onUpdate:modelValue":n[3]||(n[3]=a=>u(l).phone=a),type:"text",name:"phone",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["show"]),T(t(Y,{title:s.$t("users.no_users"),description:s.$t("users.list_of_users")},{actions:e(()=>[u(_).currentUser.is_owner?(p(),f(P,{key:0,variant:"primary-outline",onClick:n[4]||(n[4]=a=>s.$router.push("/admin/users/create"))},{left:e(a=>[t(m,{name:"PlusIcon",class:x(a.class)},null,8,["class"])]),default:e(()=>[v(" "+c(s.$t("users.add_user")),1)]),_:1})):A("",!0)]),default:e(()=>[t(de,{class:"mt-5 mb-4"})]),_:1},8,["title","description"]),[[z,$.value]]),T(g("div",_e,[g("div",he,[u(r).selectedUsers.length?(p(),f(ee,{key:0},{activator:e(()=>[g("span",ge,[v(c(s.$t("general.actions"))+" ",1),t(m,{name:"ChevronDownIcon",class:"h-5"})])]),default:e(()=>[t(Z,{onClick:J},{default:e(()=>[t(m,{name:"TrashIcon",class:"h-5 mr-3 text-gray-600"}),v(" "+c(s.$t("general.delete")),1)]),_:1})]),_:1})):A("",!0)]),t(ae,{ref_key:"table",ref:i,data:X,columns:h.value,class:"mt-3"},me({header:e(()=>[g("div",ve,[t(E,{modelValue:C.value,"onUpdate:modelValue":n[5]||(n[5]=a=>C.value=a),variant:"primary",onChange:u(r).selectAllUsers},null,8,["modelValue","onChange"])])]),"cell-status":e(({row:a})=>[g("div",ye,[t(E,{id:a.data.id,modelValue:k.value,"onUpdate:modelValue":n[6]||(n[6]=le=>k.value=le),value:a.data.id,variant:"primary"},null,8,["id","modelValue","value"])])]),"cell-name":e(({row:a})=>[t(te,{to:{path:`users/${a.data.id}/edit`},class:"font-medium text-primary-500"},{default:e(()=>[v(c(a.data.name),1)]),_:2},1032,["to"])]),"cell-phone":e(({row:a})=>[g("span",null,c(a.data.phone?a.data.phone:"-"),1)]),"cell-created_at":e(({row:a})=>[g("span",null,c(a.data.formatted_created_at),1)]),_:2},[u(_).currentUser.is_owner?{name:"cell-actions",fn:e(({row:a})=>[t(pe,{row:a.data,table:u(i),"load-data":S},null,8,["row","table"])]),key:"0"}:void 0]),1032,["columns"])],512),[[z,!$.value]])]),_:1})}}};export{Ge as default};
