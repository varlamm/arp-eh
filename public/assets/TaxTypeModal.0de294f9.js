import{r as C,a as b,O as i,j as $,k as g,U as l,P as y,as as x,X as v,u as e,l as o,by as z,g as N,R as U}from"./@vue.8cc12e6e.js";import{q as j,c as D,u as G,k as L}from"./main.f5ac513d.js";import"./axios.7b768d2b.js";import"./moment.9709ab41.js";import"./guid.7b3dea7e.js";import"./lodash.8ab3583e.js";import{v as E}from"./vue-i18n.c6de3223.js";import{c,r as h,m as X,h as O,b as P,d as R}from"./@vuelidate.c7422de1.js";const A={class:"flex justify-between w-full"},F=["onSubmit"],H={class:"p-4 sm:p-6"},J={class:"z-0 flex justify-end p-4 border-t border-solid border--200 border-modal-bg"},oe={__name:"TaxTypeModal",setup(K){const a=j(),u=D();G(),L();const{t:d,tm:Q}=E.useI18n();let p=C(!1);const B=b(()=>({currentTaxType:{name:{required:c.withMessage(d("validation.required"),h),minLength:c.withMessage(d("validation.name_min_length",{count:3}),X(3))},percent:{required:c.withMessage(d("validation.required"),h),between:c.withMessage(d("validation.enter_valid_tax_rate"),O(0,100))},description:{maxLength:c.withMessage(d("validation.description_maxlength",{count:255}),P(255))}}})),r=R(B,b(()=>a));async function w(){if(r.value.currentTaxType.$touch(),r.value.currentTaxType.$invalid)return!0;try{const s=a.isEdit?a.updateTaxType:a.addTaxType;p.value=!0;let t=await s(a.currentTaxType);p.value=!1,u.refreshData&&u.refreshData(t.data.data),m()}catch{return p.value=!1,!0}}function m(){u.closeModal(),setTimeout(()=>{a.resetCurrentTaxType(),r.value.$reset()},300)}return(s,t)=>{const f=i("BaseIcon"),V=i("BaseInput"),T=i("BaseInputGroup"),I=i("BaseMoney"),M=i("BaseTextarea"),S=i("BaseSwitch"),k=i("BaseInputGrid"),_=i("BaseButton"),q=i("BaseModal");return $(),g(q,{show:e(u).active&&e(u).componentName==="TaxTypeModal",onClose:m},{header:l(()=>[y("div",A,[x(v(e(u).title)+" ",1),o(f,{name:"XIcon",class:"h-6 w-6 text-gray-500 cursor-pointer",onClick:m})])]),default:l(()=>[y("form",{action:"",onSubmit:z(w,["prevent"])},[y("div",H,[o(k,{layout:"one-column"},{default:l(()=>[o(T,{label:s.$t("tax_types.name"),variant:"horizontal",error:e(r).currentTaxType.name.$error&&e(r).currentTaxType.name.$errors[0].$message,required:""},{default:l(()=>[o(V,{modelValue:e(a).currentTaxType.name,"onUpdate:modelValue":t[0]||(t[0]=n=>e(a).currentTaxType.name=n),invalid:e(r).currentTaxType.name.$error,type:"text",onInput:t[1]||(t[1]=n=>e(r).currentTaxType.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),o(T,{label:s.$t("tax_types.percent"),variant:"horizontal",error:e(r).currentTaxType.percent.$error&&e(r).currentTaxType.percent.$errors[0].$message,required:""},{default:l(()=>[o(I,{modelValue:e(a).currentTaxType.percent,"onUpdate:modelValue":t[2]||(t[2]=n=>e(a).currentTaxType.percent=n),currency:{decimal:".",thousands:",",symbol:"% ",precision:2,masked:!1},invalid:e(r).currentTaxType.percent.$error,class:"relative w-full focus:border focus:border-solid focus:border-primary",onInput:t[3]||(t[3]=n=>e(r).currentTaxType.percent.$touch())},null,8,["modelValue","currency","invalid"])]),_:1},8,["label","error"]),o(T,{label:s.$t("tax_types.description"),error:e(r).currentTaxType.description.$error&&e(r).currentTaxType.description.$errors[0].$message,variant:"horizontal"},{default:l(()=>[o(M,{modelValue:e(a).currentTaxType.description,"onUpdate:modelValue":t[4]||(t[4]=n=>e(a).currentTaxType.description=n),invalid:e(r).currentTaxType.description.$error,rows:"4",cols:"50",onInput:t[5]||(t[5]=n=>e(r).currentTaxType.description.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),o(T,{label:s.$t("tax_types.compound_tax"),variant:"horizontal",class:"flex flex-row-reverse"},{default:l(()=>[o(S,{modelValue:e(a).currentTaxType.compound_tax,"onUpdate:modelValue":t[6]||(t[6]=n=>e(a).currentTaxType.compound_tax=n),class:"flex items-center"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),y("div",J,[o(_,{class:"mr-3 text-sm",variant:"primary-outline",type:"button",onClick:m},{default:l(()=>[x(v(s.$t("general.cancel")),1)]),_:1}),o(_,{loading:e(p),disabled:e(p),variant:"primary",type:"submit"},{left:l(n=>[e(p)?U("",!0):($(),g(f,{key:0,name:"SaveIcon",class:N(n.class)},null,8,["class"]))]),default:l(()=>[x(" "+v(e(a).isEdit?s.$t("general.update"):s.$t("general.save")),1)]),_:1},8,["loading","disabled"])])],40,F)]),_:1},8,["show"])}}};export{oe as _};
