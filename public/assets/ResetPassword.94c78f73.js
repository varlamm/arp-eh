import{f as I,r as q,a as m,O as f,j as h,M as S,l as s,U as p,u as i,as as L,X as P,by as k}from"./@vue.8cc12e6e.js";import{d as N,r as v,e as U,m as A,s as C}from"./@vuelidate.c7422de1.js";import{u as E,h as R}from"./main.f5ac513d.js";import{u as j,b as D}from"./vue-router.746ec05f.js";import{a as G}from"./axios.7b768d2b.js";import{v as M}from"./vue-i18n.c6de3223.js";import"./v-tooltip.1cd7a91e.js";import"./vue-resize.0b8cd4b5.js";import"./@popperjs.940d197a.js";import"./pinia.32c02ade.js";import"./lodash.8ab3583e.js";import"./@intlify.0be1c2d8.js";import"./vue.a6ed3e81.js";import"./moment.9709ab41.js";import"./guid.7b3dea7e.js";import"./@headlessui.4523e0e1.js";import"./@vueuse.b6c5a1c1.js";import"./prettier.6e0a0647.js";import"./vue-flatpickr-component.30399bbe.js";import"./flatpickr.dff0933c.js";import"./@heroicons.aa650707.js";import"./v-money3.6f830de1.js";import"./maska.1121c2e3.js";const x=["onSubmit"],dr={__name:"ResetPassword",setup(F){const w=E(),{t}=M.useI18n(),c=j(),_=D(),o=I({email:"",password:"",password_confirmation:""}),u=q(!1),$=m(()=>({email:{required:v,email:U},password:{required:v,minLength:A(8)},password_confirmation:{sameAsPassword:C(o.password)}})),e=N($,o),g=m(()=>e.value.email.$error?e.value.email.required.$invalid?t("validation.required"):e.value.email.email?t("validation.email_incorrect"):!1:""),b=m(()=>e.value.password.$error?e.value.password.required.$invalid?t("validation.required"):e.value.password.minLength?t("validation.password_min_length",{count:e.value.password.minLength.$params.min}):!1:""),y=m(()=>e.value.password_confirmation.$error?e.value.password_confirmation.sameAsPassword.$invalid?t("validation.password_incorrect"):!1:"");async function V(n){if(e.value.$touch(),!e.value.$invalid)try{let r={email:o.email,password:o.password,password_confirmation:o.password_confirmation,token:c.params.token};u.value=!0;let l=await G.post("/api/v1/auth/reset/password",r);u.value=!1,l.data&&(w.showNotification({type:"success",message:t("login.password_reset_successfully")}),_.push("/login"))}catch(r){R(r),u.value=!1,r.response&&r.response.status}}return(n,r)=>{const l=f("BaseInput"),d=f("BaseInputGroup"),B=f("BaseButton");return h(),S("form",{id:"loginForm",onSubmit:k(V,["prevent"])},[s(d,{error:g.value,label:n.$t("login.email"),class:"mb-4",required:""},{default:p(()=>[s(l,{modelValue:o.email,"onUpdate:modelValue":r[0]||(r[0]=a=>o.email=a),invalid:i(e).email.$error,focus:"",type:"email",name:"email",onInput:r[1]||(r[1]=a=>i(e).email.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["error","label"]),s(d,{error:b.value,label:n.$t("login.password"),class:"mb-4",required:""},{default:p(()=>[s(l,{modelValue:o.password,"onUpdate:modelValue":r[2]||(r[2]=a=>o.password=a),invalid:i(e).password.$error,type:"password",name:"password",onInput:r[3]||(r[3]=a=>i(e).password.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["error","label"]),s(d,{error:y.value,label:n.$t("login.retype_password"),class:"mb-4",required:""},{default:p(()=>[s(l,{modelValue:o.password_confirmation,"onUpdate:modelValue":r[4]||(r[4]=a=>o.password_confirmation=a),invalid:i(e).password_confirmation.$error,type:"password",name:"password",onInput:r[5]||(r[5]=a=>i(e).password_confirmation.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["error","label"]),s(B,{loading:u.value,type:"submit",variant:"primary"},{default:p(()=>[L(P(n.$t("login.reset_password")),1)]),_:1},8,["loading"])],40,x)}}};export{dr as default};
