import{i as K,r as y,f as Q,a as I,O as o,j as u,k as c,U as e,l as t,u as d,g as C,as as p,X as _,R as w,L as S,bx as F,P}from"./@vue.8cc12e6e.js";import Y from"./BaseTable.62565885.js";import{u as Z}from"./global.b17b6368.js";import{u as tt}from"./estimate.da313ea4.js";import{u as et}from"./vue-router.746ec05f.js";import{_ as at}from"./ObservatoryIcon.5786089a.js";import{v as st}from"./vue-i18n.c6de3223.js";import{d as ot}from"./@vueuse.b6c5a1c1.js";import"./lodash.8ab3583e.js";import"./@intlify.0be1c2d8.js";import"./moment.9709ab41.js";import"./main.f5ac513d.js";import"./v-tooltip.1cd7a91e.js";import"./vue-resize.0b8cd4b5.js";import"./@popperjs.940d197a.js";import"./axios.7b768d2b.js";import"./pinia.32c02ade.js";import"./vue.a6ed3e81.js";import"./@vuelidate.c7422de1.js";import"./guid.7b3dea7e.js";import"./@headlessui.4523e0e1.js";import"./prettier.6e0a0647.js";import"./vue-flatpickr-component.30399bbe.js";import"./flatpickr.dff0933c.js";import"./@heroicons.aa650707.js";import"./v-money3.6f830de1.js";import"./maska.1121c2e3.js";import"./auth.f67c9755.js";const lt=P("div",{class:"hidden w-8 h-0 mx-4 border border-gray-400 border-solid xl:block",style:{"margin-top":"1.5rem"}},null,-1),nt={class:"relative table-container"},Ht={__name:"Index",setup(rt){const{t:f}=st.useI18n();K("utils"),et();const E=y(null);let m=y(!1),h=y(!0);const x=y(["DRAFT","SENT","VIEWED","EXPIRED","ACCEPTED","REJECTED"]),s=Q({status:"",from_date:"",to_date:"",estimate_number:""}),v=Z(),b=tt(),N=I(()=>[{key:"estimate_date",label:f("estimates.date"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"estimate_number",label:f("estimates.number",2)},{key:"status",label:f("estimates.status")},{key:"total",label:f("estimates.total")},{key:"actions",thClass:"text-right",tdClass:"text-right text-sm font-medium",sortable:!1}]),k=I(()=>!b.totalEstimates&&!h.value);I(()=>v.currency),ot(s,()=>{H()},{debounce:500});function T(){E.value.refresh()}function H(){T()}function D(){s.status="",s.from_date="",s.to_date="",s.estimate_number=""}function R(){m.value&&D(),m.value=!m.value}async function U({page:l,sort:n}){let B={status:s.status,estimate_number:s.estimate_number,from_date:s.from_date,to_date:s.to_date,orderByField:n.fieldName||"created_at",orderBy:n.order||"desc",page:l};h.value=!0;let i=await b.fetchEstimate(B,v.companySlug);return h.value=!1,{data:i.data.data,pagination:{totalPages:i.data.meta.last_page,currentPage:l,totalCount:i.data.meta.total,limit:10}}}return(l,n)=>{const B=o("BaseBreadcrumbItem"),i=o("BaseBreadcrumb"),r=o("BaseIcon"),W=o("BaseButton"),j=o("BasePageHeader"),z=o("BaseSelectInput"),g=o("BaseInputGroup"),G=o("BaseInput"),V=o("BaseDatePicker"),X=o("BaseFilterWrapper"),A=o("BaseEmptyPlaceholder"),$=o("router-link"),M=o("BaseEstimateStatusBadge"),J=o("BaseFormatMoney"),L=o("BaseDropdownItem"),O=o("BaseDropdown"),q=o("BasePage");return u(),c(q,null,{default:e(()=>[t(j,{title:l.$t("estimates.title")},{actions:e(()=>[d(b).totalEstimates?(u(),c(W,{key:0,variant:"primary-outline",onClick:R},{right:e(a=>[d(m)?(u(),c(r,{key:1,name:"XIcon",class:C(a.class)},null,8,["class"])):(u(),c(r,{key:0,name:"FilterIcon",class:C(a.class)},null,8,["class"]))]),default:e(()=>[p(_(l.$t("general.filter"))+" ",1)]),_:1})):w("",!0)]),default:e(()=>[t(i,null,{default:e(()=>[t(B,{title:l.$t("general.home"),to:`/${d(v).companySlug}/customer/dashboard`},null,8,["title","to"]),t(B,{title:l.$tc("estimates.estimate",2),to:"#",active:""},null,8,["title"])]),_:1})]),_:1},8,["title"]),S(t(X,{onClear:D},{default:e(()=>[t(g,{label:l.$t("estimates.status"),class:"px-3"},{default:e(()=>[t(z,{modelValue:s.status,"onUpdate:modelValue":n[0]||(n[0]=a=>s.status=a),options:x.value,searchable:"","show-labels":!1,"allow-empty":!1,placeholder:l.$t("general.select_a_status")},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"]),t(g,{label:l.$t("estimates.estimate_number"),color:"black-light",class:"px-3 mt-2"},{default:e(()=>[t(G,{modelValue:s.estimate_number,"onUpdate:modelValue":n[1]||(n[1]=a=>s.estimate_number=a)},{default:e(()=>[t(r,{name:"DotsHorizontalIcon",class:"h-5 text-gray-500"}),t(r,{name:"HashtagIcon",class:"h-5 mr-3 text-gray-600"})]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(g,{label:l.$t("general.from"),class:"px-3"},{default:e(()=>[t(V,{modelValue:s.from_date,"onUpdate:modelValue":n[2]||(n[2]=a=>s.from_date=a),"calendar-button":!0,"calendar-button-icon":"calendar"},null,8,["modelValue"])]),_:1},8,["label"]),lt,t(g,{label:l.$t("general.to"),class:"px-3"},{default:e(()=>[t(V,{modelValue:s.to_date,"onUpdate:modelValue":n[3]||(n[3]=a=>s.to_date=a),"calendar-button":!0,"calendar-button-icon":"calendar"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},512),[[F,d(m)]]),k.value?(u(),c(A,{key:0,title:l.$t("estimates.no_estimates"),description:l.$t("estimates.list_of_estimates")},{default:e(()=>[t(at,{class:"mt-5 mb-4"})]),_:1},8,["title","description"])):w("",!0),S(P("div",nt,[t(Y,{ref_key:"table",ref:E,data:U,columns:N.value,"placeholder-count":d(b).totalEstimates>=20?10:5,class:"mt-10"},{"cell-estimate_date":e(({row:a})=>[p(_(a.data.formatted_estimate_date),1)]),"cell-estimate_number":e(({row:a})=>[t($,{to:{path:`estimates/${a.data.id}/view`},class:"font-medium text-primary-500"},{default:e(()=>[p(_(a.data.estimate_number),1)]),_:2},1032,["to"])]),"cell-status":e(({row:a})=>[t(M,{status:a.data.status,class:"px-3 py-1"},{default:e(()=>[p(_(a.data.status),1)]),_:2},1032,["status"])]),"cell-total":e(({row:a})=>[t(J,{amount:a.data.total},null,8,["amount"])]),"cell-actions":e(({row:a})=>[t(O,null,{activator:e(()=>[t(r,{name:"DotsHorizontalIcon",class:"h-5 text-gray-500"})]),default:e(()=>[t($,{to:`estimates/${a.data.id}/view`},{default:e(()=>[t(L,null,{default:e(()=>[t(r,{name:"EyeIcon",class:"h-5 mr-3 text-gray-600"}),p(" "+_(l.$t("general.view")),1)]),_:1})]),_:2},1032,["to"])]),_:2},1024)]),_:1},8,["columns","placeholder-count"])],512),[[F,!k.value]])]),_:1})}}};export{Ht as default};
