import{f as h,r as $,a as M,O as p,j as f,M as E,l as i,U as d,u as e,k as g,z as _,as as C,X as P,by as R}from"./@vue.8cc12e6e.js";import{d as U,c as u,r as y,e as x,m as A,s as G}from"./@vuelidate.c7422de1.js";import{u as L}from"./global.b17b6368.js";import{v as O}from"./vue-i18n.c6de3223.js";import{u as j,b as D}from"./vue-router.746ec05f.js";import{u as N}from"./auth.f67c9755.js";import"./main.f5ac513d.js";import"./v-tooltip.1cd7a91e.js";import"./vue-resize.0b8cd4b5.js";import"./@popperjs.940d197a.js";import"./axios.7b768d2b.js";import"./pinia.32c02ade.js";import"./lodash.8ab3583e.js";import"./@intlify.0be1c2d8.js";import"./vue.a6ed3e81.js";import"./moment.9709ab41.js";import"./guid.7b3dea7e.js";import"./@headlessui.4523e0e1.js";import"./@vueuse.b6c5a1c1.js";import"./prettier.6e0a0647.js";import"./vue-flatpickr-component.30399bbe.js";import"./flatpickr.dff0933c.js";import"./@heroicons.aa650707.js";import"./v-money3.6f830de1.js";import"./maska.1121c2e3.js";const z=["onSubmit"],$o={__name:"ResetPassword",setup(F){const c=j(),b=D(),I=N(),{t:n}=O.useI18n(),a=h({email:"",password:"",password_confirmation:""});L();let s=$(!1),v=$(!1);const V=M(()=>({email:{required:u.withMessage(n("validation.required"),y),email:u.withMessage(n("validation.email_incorrect"),x)},password:{required:u.withMessage(n("validation.required"),y),minLength:u.withMessage(n("validation.password_min_length",{count:8}),A(8))},password_confirmation:{sameAsPassword:u.withMessage(n("validation.password_incorrect"),G(a.password))}})),r=U(V,a);async function B(m){if(r.value.$touch(),!r.value.$invalid){let o={email:a.email,password:a.password,password_confirmation:a.password_confirmation,token:c.params.token};v.value=!0;let l=I.resetPassword(o,c.params.company);v.value=!1,l.data&&b.push({name:"customer.login"})}}return(m,o)=>{const l=p("BaseInput"),w=p("BaseInputGroup"),k=p("EyeOffIcon"),q=p("EyeIcon"),S=p("BaseButton");return f(),E("form",{id:"loginForm",onSubmit:R(B,["prevent"])},[i(w,{error:e(r).email.$error&&e(r).email.$errors[0].$message,label:m.$t("login.email"),class:"mb-4",required:""},{default:d(()=>[i(l,{modelValue:a.email,"onUpdate:modelValue":o[0]||(o[0]=t=>a.email=t),type:"email",name:"email",invalid:e(r).email.$error,onInput:o[1]||(o[1]=t=>e(r).email.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["error","label"]),i(w,{error:e(r).password.$error&&e(r).password.$errors[0].$message,label:m.$t("login.password"),class:"mb-4",required:""},{default:d(()=>[i(l,{modelValue:a.password,"onUpdate:modelValue":o[4]||(o[4]=t=>a.password=t),type:e(s)?"text":"password",name:"password",invalid:e(r).password.$error,onInput:o[5]||(o[5]=t=>e(r).password.$touch())},{right:d(()=>[e(s)?(f(),g(k,{key:0,class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:o[2]||(o[2]=t=>_(s)?s.value=!e(s):s=!e(s))})):(f(),g(q,{key:1,class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:o[3]||(o[3]=t=>_(s)?s.value=!e(s):s=!e(s))}))]),_:1},8,["modelValue","type","invalid"])]),_:1},8,["error","label"]),i(w,{error:e(r).password_confirmation.$error&&e(r).password_confirmation.$errors[0].$message,label:m.$t("login.retype_password"),class:"mb-4",required:""},{default:d(()=>[i(l,{modelValue:a.password_confirmation,"onUpdate:modelValue":o[6]||(o[6]=t=>a.password_confirmation=t),type:"password",name:"password",invalid:e(r).password_confirmation.$error,onInput:o[7]||(o[7]=t=>e(r).password_confirmation.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["error","label"]),i(S,{type:"submit",variant:"primary"},{default:d(()=>[C(P(m.$t("login.reset_password")),1)]),_:1})],40,z)}}};export{$o as default};
