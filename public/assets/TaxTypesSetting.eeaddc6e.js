import{j as R,u as q,q as M,e as O,c as j,g as f,b as H,r as G}from"./main.f5ac513d.js";import{v as z}from"./vue-i18n.c6de3223.js";import{u as J}from"./vue-router.746ec05f.js";import{i as V,O as s,j as m,k as g,U as e,u as r,l as o,as as T,X as S,R as P,r as Y,a as N,aq as $,g as K,M as Q}from"./@vue.8cc12e6e.js";import{_ as W}from"./TaxTypeModal.0de294f9.js";import"./v-tooltip.1cd7a91e.js";import"./vue-resize.0b8cd4b5.js";import"./@popperjs.940d197a.js";import"./axios.7b768d2b.js";import"./pinia.32c02ade.js";import"./lodash.8ab3583e.js";import"./@intlify.0be1c2d8.js";import"./vue.a6ed3e81.js";import"./@vuelidate.c7422de1.js";import"./moment.9709ab41.js";import"./guid.7b3dea7e.js";import"./@headlessui.4523e0e1.js";import"./@vueuse.b6c5a1c1.js";import"./prettier.6e0a0647.js";import"./vue-flatpickr-component.30399bbe.js";import"./flatpickr.dff0933c.js";import"./@heroicons.aa650707.js";import"./v-money3.6f830de1.js";import"./maska.1121c2e3.js";const Z={__name:"TaxTypeIndexDropdown",props:{row:{type:Object,default:null},table:{type:Object,default:null},loadData:{type:Function,default:null}},setup(B){const t=B,b=R();q();const{t:l}=z.useI18n(),v=M(),C=J(),u=O(),E=j();V("utils");async function i(c){await v.fetchTaxType(c),E.openModal({title:l("settings.tax_types.edit_tax"),componentName:"TaxTypeModal",size:"sm",refreshData:t.loadData&&t.loadData})}function h(c){b.openDialog({title:l("general.are_you_sure"),message:l("settings.tax_types.confirm_delete"),yesLabel:l("general.ok"),noLabel:l("general.cancel"),variant:"danger",hideNoButton:!1,size:"lg"}).then(async d=>{if(d){if((await v.deleteTaxType(c)).data.success)return t.loadData&&t.loadData(),!0;t.loadData&&t.loadData()}})}return(c,d)=>{const p=s("BaseIcon"),w=s("BaseButton"),D=s("BaseDropdownItem"),k=s("BaseDropdown");return m(),g(k,null,{activator:e(()=>[r(C).name==="tax-types.view"?(m(),g(w,{key:0,variant:"primary"},{default:e(()=>[o(p,{name:"DotsHorizontalIcon",class:"h-5 text-white"})]),_:1})):(m(),g(p,{key:1,name:"DotsHorizontalIcon",class:"h-5 text-gray-500"}))]),default:e(()=>[r(u).hasAbilities(r(f).EDIT_TAX_TYPE)?(m(),g(D,{key:0,onClick:d[0]||(d[0]=I=>i(B.row.id))},{default:e(()=>[o(p,{name:"PencilIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),T(" "+S(c.$t("general.edit")),1)]),_:1})):P("",!0),r(u).hasAbilities(r(f).DELETE_TAX_TYPE)?(m(),g(D,{key:1,onClick:d[1]||(d[1]=I=>h(B.row.id))},{default:e(()=>[o(p,{name:"TrashIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),T(" "+S(c.$t("general.delete")),1)]),_:1})):P("",!0)]),_:1})}}},ee={key:0},De={__name:"TaxTypesSetting",setup(B){const{t}=z.useI18n(),b=V("utils"),l=H(),v=M(),C=j(),u=O(),E=G(),i=Y(null),h=Y(l.selectedCompanySettings.tax_per_item),c=N(()=>[{key:"name",label:t("settings.tax_types.tax_name"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"compound_tax",label:t("settings.tax_types.compound_tax"),tdClass:"font-medium text-gray-900"},{key:"percent",label:t("settings.tax_types.percent"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"actions",label:"",tdClass:"text-right text-sm font-medium",sortable:!1}]),d=N(()=>l.selectedCompanySettings.sales_tax_us_enabled==="YES"&&E.salesTaxUSEnabled),p=N({get:()=>h.value==="YES",set:async n=>{const _=n?"YES":"NO";let y={settings:{tax_per_item:_}};h.value=_,await l.updateCompanySettings({data:y,message:"general.setting_updated"})}});function w(){return u.hasAbilities([f.DELETE_TAX_TYPE,f.EDIT_TAX_TYPE])}async function D({page:n,filter:_,sort:y}){let A={orderByField:y.fieldName||"created_at",orderBy:y.order||"desc",page:n},x=await v.fetchTaxTypes(A);return{data:x.data.data,pagination:{totalPages:x.data.meta.last_page,currentPage:n,totalCount:x.data.meta.total,limit:5}}}async function k(){i.value&&i.value.refresh()}function I(){C.openModal({title:t("settings.tax_types.add_tax"),componentName:"TaxTypeModal",size:"sm",refreshData:i.value&&i.value.refresh})}return(n,_)=>{const y=s("BaseIcon"),A=s("BaseButton"),x=s("BaseBadge"),X=s("BaseTable"),U=s("BaseDivider"),L=s("BaseSwitchSection"),F=s("BaseSettingCard");return m(),g(F,{title:n.$t("settings.tax_types.title"),description:n.$t("settings.tax_types.description")},$({default:e(()=>[o(W),o(X,{ref_key:"table",ref:i,class:"mt-16",data:D,columns:c.value},$({"cell-compound_tax":e(({row:a})=>[o(x,{"bg-color":r(b).getBadgeStatusColor(a.data.compound_tax?"YES":"NO").bgColor,color:r(b).getBadgeStatusColor(a.data.compound_tax?"YES":"NO").color},{default:e(()=>[T(S(a.data.compound_tax?"Yes":"No".replace("_"," ")),1)]),_:2},1032,["bg-color","color"])]),"cell-percent":e(({row:a})=>[T(S(a.data.percent)+" % ",1)]),_:2},[w()?{name:"cell-actions",fn:e(({row:a})=>[o(Z,{row:a.data,table:i.value,"load-data":k},null,8,["row","table"])]),key:"0"}:void 0]),1032,["columns"]),r(u).currentUser.is_owner?(m(),Q("div",ee,[o(U,{class:"mt-8 mb-2"}),o(L,{modelValue:p.value,"onUpdate:modelValue":_[0]||(_[0]=a=>p.value=a),disabled:d.value,title:n.$t("settings.tax_types.tax_per_item"),description:n.$t("settings.tax_types.tax_setting_description")},null,8,["modelValue","disabled","title","description"])])):P("",!0)]),_:2},[r(u).hasAbilities(r(f).CREATE_TAX_TYPE)?{name:"action",fn:e(()=>[o(A,{type:"submit",variant:"primary-outline",onClick:I},{left:e(a=>[o(y,{class:K(a.class),name:"PlusIcon"},null,8,["class"])]),default:e(()=>[T(" "+S(n.$t("settings.tax_types.add_new_tax")),1)]),_:1})]),key:"0"}:void 0]),1032,["title","description"])}}};export{De as default};
