import{b as F,d as H,i as nt,k as it,p as ot,c as lt,j as mt}from"./main.f5ac513d.js";import{r as h,a as E,e as ut,O as d,j as S,M as w,P as r,X as f,l as t,U as u,by as A,g as M,as as D,F as q,aW as rt,k as U,u as b,R,i as k,f as T}from"./@vue.8cc12e6e.js";import{v as L}from"./vue-i18n.c6de3223.js";import{d as dt}from"./vuedraggable.e15681bc.js";import{G as J}from"./guid.7b3dea7e.js";import{D as ct}from"./DragIcon.20becf7b.js";import{u as _t}from"./@vueuse.b6c5a1c1.js";import{c as Q,a as K,n as Z,d as tt}from"./@vuelidate.c7422de1.js";import{u as pt}from"./payment.333e3a22.js";import{_ as gt}from"./ItemUnitModal.cd06db8c.js";import"./v-tooltip.1cd7a91e.js";import"./vue-resize.0b8cd4b5.js";import"./@popperjs.940d197a.js";import"./axios.7b768d2b.js";import"./vue-router.746ec05f.js";import"./pinia.32c02ade.js";import"./lodash.8ab3583e.js";import"./@intlify.0be1c2d8.js";import"./vue.a6ed3e81.js";import"./moment.9709ab41.js";import"./@headlessui.4523e0e1.js";import"./prettier.6e0a0647.js";import"./vue-flatpickr-component.30399bbe.js";import"./flatpickr.dff0933c.js";import"./@heroicons.aa650707.js";import"./v-money3.6f830de1.js";import"./maska.1121c2e3.js";import"./sortablejs.79e2f684.js";const yt={class:"text-gray-900 text-lg font-medium"},ft={class:"mt-1 text-sm text-gray-500"},vt={class:"overflow-x-auto"},bt={class:"w-full mt-6 table-fixed"},St=r("colgroup",null,[r("col",{style:{width:"4%"}}),r("col",{style:{width:"45%"}}),r("col",{style:{width:"27%"}}),r("col",{style:{width:"24%"}})],-1),$t=r("thead",null,[r("tr",null,[r("th",{class:"px-5 py-3 text-sm not-italic font-medium leading-5 text-left text-gray-700 border-t border-b border-gray-200 border-solid"}),r("th",{class:"px-5 py-3 text-sm not-italic font-medium leading-5 text-left text-gray-700 border-t border-b border-gray-200 border-solid"}," Component "),r("th",{class:"px-5 py-3 text-sm not-italic font-medium leading-5 text-left text-gray-700 border-t border-b border-gray-200 border-solid"}," Parameter "),r("th",{class:"px-5 py-3 text-sm not-italic font-medium leading-5 text-left text-gray-700 border-t border-b border-gray-200 border-solid"})])],-1),Bt={class:"relative"},ht={class:"text-gray-300 cursor-move handle align-middle"},zt={class:"px-5 py-4"},It={class:"block text-sm not-italic font-medium text-primary-800 whitespace-nowrap mr-2 min-w-[200px]"},Vt={class:"text-xs text-gray-500 mt-1"},xt={class:"px-5 py-4 text-left align-middle"},Ct={class:"px-5 py-4 text-right align-middle pt-10"},wt={colspan:"2",class:"px-5 py-4"},Dt={class:"px-5 py-4 text-right align-middle",colspan:"2"},W={__name:"NumberCustomizer",props:{type:{type:String,required:!0},typeStore:{type:Object,required:!0},defaultSeries:{type:String,default:"INV"}},setup(z){const m=z,{t:l}=L.useI18n(),_=F(),g=H(),o=h([]),s=h(!1),i=h([{label:l("settings.customization.series"),description:l("settings.customization.series_description"),name:"SERIES",paramLabel:l("settings.customization.series_param_label"),value:m.defaultSeries,inputDisabled:!1,inputType:"text",allowMultiple:!1},{label:l("settings.customization.sequence"),description:l("settings.customization.sequence_description"),name:"SEQUENCE",paramLabel:l("settings.customization.sequence_param_label"),value:"6",inputDisabled:!1,inputType:"number",allowMultiple:!1},{label:l("settings.customization.delimiter"),description:l("settings.customization.delimiter_description"),name:"DELIMITER",paramLabel:l("settings.customization.delimiter_param_label"),value:"-",inputDisabled:!1,inputType:"text",allowMultiple:!0},{label:l("settings.customization.customer_series"),description:l("settings.customization.customer_series_description"),name:"CUSTOMER_SERIES",paramLabel:"",value:"",inputDisabled:!0,inputType:"text",allowMultiple:!1},{label:l("settings.customization.customer_sequence"),description:l("settings.customization.customer_sequence_description"),name:"CUSTOMER_SEQUENCE",paramLabel:l("settings.customization.customer_sequence_param_label"),value:"6",inputDisabled:!1,inputType:"number",allowMultiple:!1},{label:l("settings.customization.date_format"),description:l("settings.customization.date_format_description"),name:"DATE_FORMAT",paramLabel:l("settings.customization.date_format_param_label"),value:"Y",inputDisabled:!1,inputType:"text",allowMultiple:!0},{label:l("settings.customization.random_sequence"),description:l("settings.customization.random_sequence_description"),name:"RANDOM_SEQUENCE",paramLabel:l("settings.customization.random_sequence_param_label"),value:"6",inputDisabled:!1,inputType:"number",allowMultiple:!1}]),e=E(()=>i.value.filter(function(y){return!o.value.some(function(I){return y.allowMultiple?!1:y.name==I.name})})),c=h(""),a=h(!1),n=h(!1),p=E(()=>{let y="";return o.value.forEach(I=>{let G=`{{${I.name}`;I.value&&(G+=`:${I.value}`),y+=`${G}}}`}),y});ut(o,y=>{N()}),$();async function $(){let y={format:_.selectedCompanySettings[`${m.type}_number_format`]};n.value=!0,(await g.fetchPlaceholders(y)).data.placeholders.forEach(G=>{let j=i.value.find(O=>O.name===G.name);const Y=G.value??"";o.value.push({...j,value:Y,id:J.raw()})}),n.value=!1,N()}function C(y){return o.value.find(I=>I.name===y.name)}function B(y){C(y)&&!y.allowMultiple||(o.value.push({...y,id:J.raw()}),N())}function v(y){o.value=o.value.filter(function(I){return y.id!==I.id})}function x(y,I){switch(I.name){case"SERIES":y.length>=6&&(y=y.substring(0,6));break;case"DELIMITER":y.length>=1&&(y=y.substring(0,1));break}setTimeout(()=>{I.value=y,N()},100)}const N=_t(()=>{X()},500);async function X(){if(!p.value){c.value="";return}let y={key:m.type,format:p.value};a.value=!0;let I=await m.typeStore.getNextNumber(y);a.value=!1,I.data&&(c.value=I.data.nextNumber)}async function et(){if(a.value||n.value)return;s.value=!0;let y={settings:{}};return y.settings[m.type+"_number_format"]=p.value,await _.updateCompanySettings({data:y,message:`settings.customization.${m.type}s.${m.type}_settings_updated`}),s.value=!1,!0}return(y,I)=>{const G=d("BaseInput"),j=d("BaseInputGroup"),Y=d("BaseIcon"),O=d("BaseButton"),st=d("BaseDropdownItem"),at=d("BaseDropdown");return S(),w(q,null,[r("h6",yt,f(y.$t(`settings.customization.${z.type}s.${z.type}_number_format`)),1),r("p",ft,f(y.$t(`settings.customization.${z.type}s.${z.type}_number_format_description`)),1),r("div",vt,[r("table",bt,[St,$t,t(b(dt),{modelValue:o.value,"onUpdate:modelValue":I[1]||(I[1]=V=>o.value=V),class:"divide-y divide-gray-200","item-key":"id",tag:"tbody",handle:".handle",filter:".ignore-element"},{item:u(({element:V})=>[r("tr",Bt,[r("td",ht,[t(ct)]),r("td",zt,[r("label",It,f(V.label),1),r("p",Vt,f(V.description),1)]),r("td",xt,[t(j,{label:V.paramLabel,class:"lg:col-span-3",required:""},{default:u(()=>[t(G,{modelValue:V.value,"onUpdate:modelValue":[P=>V.value=P,P=>x(P,V)],disabled:V.inputDisabled,type:V.inputType},null,8,["modelValue","onUpdate:modelValue","disabled","type"])]),_:2},1032,["label"])]),r("td",Ct,[t(O,{variant:"white",onClick:A(P=>v(V),["prevent"])},{left:u(P=>[t(Y,{name:"XIcon",class:M(["!sm:m-0",P.class])},null,8,["class"])]),default:u(()=>[D(" Remove ")]),_:2},1032,["onClick"])])])]),footer:u(()=>[r("tr",null,[r("td",wt,[t(j,{label:y.$t(`settings.customization.${z.type}s.preview_${z.type}_number`)},{default:u(()=>[t(G,{modelValue:c.value,"onUpdate:modelValue":I[0]||(I[0]=V=>c.value=V),disabled:"",loading:a.value},null,8,["modelValue","loading"])]),_:1},8,["label"])]),r("td",Dt,[t(at,{"wrapper-class":"flex items-center justify-end mt-5"},{activator:u(()=>[t(O,{variant:"primary-outline"},{left:u(V=>[t(Y,{class:M(V.class),name:"PlusIcon"},null,8,["class"])]),default:u(()=>[D(" "+f(y.$t("settings.customization.add_new_component")),1)]),_:1})]),default:u(()=>[(S(!0),w(q,null,rt(e.value,V=>(S(),U(st,{key:V.label,onClick:A(P=>B(V),["prevent"])},{default:u(()=>[D(f(V.label),1)]),_:2},1032,["onClick"]))),128))]),_:1})])])]),_:1},8,["modelValue"])])]),t(O,{loading:s.value,disabled:s.value,variant:"primary",type:"submit",class:"mt-4",onClick:et},{left:u(V=>[s.value?R("",!0):(S(),U(Y,{key:0,class:M(V.class),name:"SaveIcon"},null,8,["class"]))]),default:u(()=>[D(" "+f(y.$t("settings.customization.save")),1)]),_:1},8,["loading","disabled"])],64)}}},Et={__name:"InvoicesTabInvoiceNumber",setup(z){const m=nt();return(l,_)=>(S(),U(W,{type:"invoice","type-store":b(m),"default-series":"INV"},null,8,["type-store"]))}},Ut={class:"text-gray-900 text-lg font-medium"},Ft={class:"mt-1 text-sm text-gray-500"},kt={__name:"InvoicesTabRetrospective",setup(z){const{t:m,tm:l}=L.useI18n(),_=F(),g=H(),o=k("utils"),s=T({retrospective_edits:null});o.mergeSettings(s,{..._.selectedCompanySettings}),E(()=>g.config.retrospective_edits.map(e=>(e.title=m(e.key),e)));async function i(){let e={settings:{...s}};return await _.updateCompanySettings({data:e,message:"settings.customization.invoices.invoice_settings_updated"}),!0}return(e,c)=>{const a=d("BaseRadio"),n=d("BaseInputGroup");return S(),w(q,null,[r("h6",Ut,f(e.$tc("settings.customization.invoices.retrospective_edits")),1),r("p",Ft,f(e.$t("settings.customization.invoices.retrospective_edits_description")),1),t(n,{required:""},{default:u(()=>[t(a,{id:"allow",modelValue:s.retrospective_edits,"onUpdate:modelValue":[c[0]||(c[0]=p=>s.retrospective_edits=p),i],label:e.$t("settings.customization.invoices.allow"),size:"sm",name:"filter",value:"allow",class:"mt-2"},null,8,["modelValue","label"]),t(a,{id:"disable_on_invoice_partial_paid",modelValue:s.retrospective_edits,"onUpdate:modelValue":[c[1]||(c[1]=p=>s.retrospective_edits=p),i],label:e.$t("settings.customization.invoices.disable_on_invoice_partial_paid"),size:"sm",name:"filter",value:"disable_on_invoice_partial_paid",class:"mt-2"},null,8,["modelValue","label"]),t(a,{id:"disable_on_invoice_paid",modelValue:s.retrospective_edits,"onUpdate:modelValue":[c[2]||(c[2]=p=>s.retrospective_edits=p),i],label:e.$t("settings.customization.invoices.disable_on_invoice_paid"),size:"sm",name:"filter",value:"disable_on_invoice_paid",class:"my-2"},null,8,["modelValue","label"]),t(a,{id:"disable_on_invoice_sent",modelValue:s.retrospective_edits,"onUpdate:modelValue":[c[3]||(c[3]=p=>s.retrospective_edits=p),i],label:e.$t("settings.customization.invoices.disable_on_invoice_sent"),size:"sm",name:"filter",value:"disable_on_invoice_sent"},null,8,["modelValue","label"])]),_:1})],64)}}},Tt=["onSubmit"],Nt={class:"text-gray-900 text-lg font-medium"},Mt={class:"mt-1 text-sm text-gray-500 mb-2"},Gt={class:"w-full sm:w-1/2 md:w-1/4 lg:w-1/5"},qt={__name:"InvoicesTabDueDate",setup(z){const{t:m}=L.useI18n(),l=F(),_=k("utils");let g=h(!1);const o=T({invoice_set_due_date_automatically:null,invoice_due_date_days:null});_.mergeSettings(o,{...l.selectedCompanySettings});const s=E({get:()=>o.invoice_set_due_date_automatically==="YES",set:async a=>{const n=a?"YES":"NO";o.invoice_set_due_date_automatically=n}}),i=E(()=>({dueDateSettings:{invoice_due_date_days:{required:Q.withMessage(m("validation.required"),K(s.value)),numeric:Q.withMessage(m("validation.numbers_only"),Z)}}})),e=tt(i,{dueDateSettings:o});async function c(){if(e.value.dueDateSettings.$touch(),e.value.dueDateSettings.$invalid)return!1;g.value=!0;let a={settings:{...o}};return s.value||delete a.settings.invoice_due_date_days,await l.updateCompanySettings({data:a,message:"settings.customization.invoices.invoice_settings_updated"}),g.value=!1,!0}return(a,n)=>{const p=d("BaseSwitchSection"),$=d("BaseInput"),C=d("BaseInputGroup"),B=d("BaseIcon"),v=d("BaseButton");return S(),w("form",{onSubmit:A(c,["prevent"])},[r("h6",Nt,f(a.$t("settings.customization.invoices.due_date")),1),r("p",Mt,f(a.$t("settings.customization.invoices.due_date_description")),1),t(p,{modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=x=>s.value=x),title:a.$t("settings.customization.invoices.set_due_date_automatically"),description:a.$t("settings.customization.invoices.set_due_date_automatically_description")},null,8,["modelValue","title","description"]),s.value?(S(),U(C,{key:0,label:a.$t("settings.customization.invoices.due_date_days"),error:b(e).dueDateSettings.invoice_due_date_days.$error&&b(e).dueDateSettings.invoice_due_date_days.$errors[0].$message,class:"mt-2 mb-4"},{default:u(()=>[r("div",Gt,[t($,{modelValue:o.invoice_due_date_days,"onUpdate:modelValue":n[1]||(n[1]=x=>o.invoice_due_date_days=x),invalid:b(e).dueDateSettings.invoice_due_date_days.$error,type:"number",onInput:n[2]||(n[2]=x=>b(e).dueDateSettings.invoice_due_date_days.$touch())},null,8,["modelValue","invalid"])])]),_:1},8,["label","error"])):R("",!0),t(v,{loading:b(g),disabled:b(g),variant:"primary",type:"submit",class:"mt-4"},{left:u(x=>[b(g)?R("",!0):(S(),U(B,{key:0,class:M(x.class),name:"SaveIcon"},null,8,["class"]))]),default:u(()=>[D(" "+f(a.$t("settings.customization.save")),1)]),_:1},8,["loading","disabled"])],40,Tt)}}},Rt=["onSubmit"],Pt={class:"text-gray-900 text-lg font-medium"},At={class:"mt-1 text-sm text-gray-500 mb-2"},Lt={__name:"InvoicesTabDefaultFormats",setup(z){const m=F(),l=k("utils"),_=h(["customer","customerCustom","invoice","invoiceCustom","company"]),g=h(["billing","customer","customerCustom","invoiceCustom"]),o=h(["shipping","customer","customerCustom","invoiceCustom"]),s=h(["company","invoiceCustom"]);let i=h(!1);const e=T({invoice_mail_body:null,invoice_company_address_format:null,invoice_shipping_address_format:null,invoice_billing_address_format:null});l.mergeSettings(e,{...m.selectedCompanySettings});async function c(){i.value=!0;let a={settings:{...e}};return await m.updateCompanySettings({data:a,message:"settings.customization.invoices.invoice_settings_updated"}),i.value=!1,!0}return(a,n)=>{const p=d("BaseCustomInput"),$=d("BaseInputGroup"),C=d("BaseIcon"),B=d("BaseButton");return S(),w("form",{onSubmit:A(c,["prevent"])},[r("h6",Pt,f(a.$t("settings.customization.invoices.default_formats")),1),r("p",At,f(a.$t("settings.customization.invoices.default_formats_description")),1),t($,{label:a.$t("settings.customization.invoices.default_invoice_email_body"),class:"mt-6 mb-4"},{default:u(()=>[t(p,{modelValue:e.invoice_mail_body,"onUpdate:modelValue":n[0]||(n[0]=v=>e.invoice_mail_body=v),fields:_.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t($,{label:a.$t("settings.customization.invoices.company_address_format"),class:"mt-6 mb-4"},{default:u(()=>[t(p,{modelValue:e.invoice_company_address_format,"onUpdate:modelValue":n[1]||(n[1]=v=>e.invoice_company_address_format=v),fields:s.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t($,{label:a.$t("settings.customization.invoices.shipping_address_format"),class:"mt-6 mb-4"},{default:u(()=>[t(p,{modelValue:e.invoice_shipping_address_format,"onUpdate:modelValue":n[2]||(n[2]=v=>e.invoice_shipping_address_format=v),fields:o.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t($,{label:a.$t("settings.customization.invoices.billing_address_format"),class:"mt-6 mb-4"},{default:u(()=>[t(p,{modelValue:e.invoice_billing_address_format,"onUpdate:modelValue":n[3]||(n[3]=v=>e.invoice_billing_address_format=v),fields:g.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t(B,{loading:b(i),disabled:b(i),variant:"primary",type:"submit",class:"mt-4"},{left:u(v=>[b(i)?R("",!0):(S(),U(C,{key:0,class:M(v.class),name:"SaveIcon"},null,8,["class"]))]),default:u(()=>[D(" "+f(a.$t("settings.customization.save")),1)]),_:1},8,["loading","disabled"])],40,Rt)}}},Yt={class:"divide-y divide-gray-200"},Ot={__name:"InvoicesTab",setup(z){const m=k("utils"),l=F(),_=T({invoice_email_attachment:null});m.mergeSettings(_,{...l.selectedCompanySettings});const g=E({get:()=>_.invoice_email_attachment==="YES",set:async o=>{const s=o?"YES":"NO";let i={settings:{invoice_email_attachment:s}};_.invoice_email_attachment=s,await l.updateCompanySettings({data:i,message:"general.setting_updated"})}});return(o,s)=>{const i=d("BaseDivider"),e=d("BaseSwitchSection");return S(),w(q,null,[t(Et),t(i,{class:"my-8"}),t(qt),t(i,{class:"my-8"}),t(kt),t(i,{class:"my-8"}),t(Lt),t(i,{class:"mt-6 mb-2"}),r("ul",Yt,[t(e,{modelValue:g.value,"onUpdate:modelValue":s[0]||(s[0]=c=>g.value=c),title:o.$t("settings.customization.invoices.invoice_email_attachment"),description:o.$t("settings.customization.invoices.invoice_email_attachment_setting_description")},null,8,["modelValue","title","description"])])],64)}}},jt={__name:"EstimatesTabEstimateNumber",setup(z){const m=it();return(l,_)=>(S(),U(W,{type:"estimate","type-store":b(m),"default-series":"EST"},null,8,["type-store"]))}},Qt=["onSubmit"],Xt={class:"text-gray-900 text-lg font-medium"},Ht={class:"mt-1 text-sm text-gray-500 mb-2"},Wt={class:"w-full sm:w-1/2 md:w-1/4 lg:w-1/5"},Jt={__name:"EstimatesTabExpiryDate",setup(z){const{t:m}=L.useI18n(),l=F(),_=k("utils");let g=h(!1);const o=T({estimate_set_expiry_date_automatically:null,estimate_expiry_date_days:null});_.mergeSettings(o,{...l.selectedCompanySettings});const s=E({get:()=>o.estimate_set_expiry_date_automatically==="YES",set:async a=>{const n=a?"YES":"NO";o.estimate_set_expiry_date_automatically=n}}),i=E(()=>({expiryDateSettings:{estimate_expiry_date_days:{required:Q.withMessage(m("validation.required"),K(s.value)),numeric:Q.withMessage(m("validation.numbers_only"),Z)}}})),e=tt(i,{expiryDateSettings:o});async function c(){if(e.value.expiryDateSettings.$touch(),e.value.expiryDateSettings.$invalid)return!1;g.value=!0;let a={settings:{...o}};return s.value||delete a.settings.estimate_expiry_date_days,await l.updateCompanySettings({data:a,message:"settings.customization.estimates.estimate_settings_updated"}),g.value=!1,!0}return(a,n)=>{const p=d("BaseSwitchSection"),$=d("BaseInput"),C=d("BaseInputGroup"),B=d("BaseIcon"),v=d("BaseButton");return S(),w("form",{onSubmit:A(c,["prevent"])},[r("h6",Xt,f(a.$t("settings.customization.estimates.expiry_date")),1),r("p",Ht,f(a.$t("settings.customization.estimates.expiry_date_description")),1),t(p,{modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=x=>s.value=x),title:a.$t("settings.customization.estimates.set_expiry_date_automatically"),description:a.$t("settings.customization.estimates.set_expiry_date_automatically_description")},null,8,["modelValue","title","description"]),s.value?(S(),U(C,{key:0,label:a.$t("settings.customization.estimates.expiry_date_days"),error:b(e).expiryDateSettings.estimate_expiry_date_days.$error&&b(e).expiryDateSettings.estimate_expiry_date_days.$errors[0].$message,class:"mt-2 mb-4"},{default:u(()=>[r("div",Wt,[t($,{modelValue:o.estimate_expiry_date_days,"onUpdate:modelValue":n[1]||(n[1]=x=>o.estimate_expiry_date_days=x),invalid:b(e).expiryDateSettings.estimate_expiry_date_days.$error,type:"number",onInput:n[2]||(n[2]=x=>b(e).expiryDateSettings.estimate_expiry_date_days.$touch())},null,8,["modelValue","invalid"])])]),_:1},8,["label","error"])):R("",!0),t(v,{loading:b(g),disabled:b(g),variant:"primary",type:"submit",class:"mt-4"},{left:u(x=>[b(g)?R("",!0):(S(),U(B,{key:0,class:M(x.class),name:"SaveIcon"},null,8,["class"]))]),default:u(()=>[D(" "+f(a.$t("settings.customization.save")),1)]),_:1},8,["loading","disabled"])],40,Qt)}}},Kt=["onSubmit"],Zt={class:"text-gray-900 text-lg font-medium"},te={class:"mt-1 text-sm text-gray-500 mb-2"},ee={__name:"EstimatesTabDefaultFormats",setup(z){const m=F(),l=k("utils"),_=h(["customer","customerCustom","estimate","estimateCustom","company"]),g=h(["billing","customer","customerCustom","estimateCustom"]),o=h(["shipping","customer","customerCustom","estimateCustom"]),s=h(["company","estimateCustom"]);let i=h(!1);const e=T({estimate_mail_body:null,estimate_company_address_format:null,estimate_shipping_address_format:null,estimate_billing_address_format:null});l.mergeSettings(e,{...m.selectedCompanySettings});async function c(){i.value=!0;let a={settings:{...e}};return await m.updateCompanySettings({data:a,message:"settings.customization.estimates.estimate_settings_updated"}),i.value=!1,!0}return(a,n)=>{const p=d("BaseCustomInput"),$=d("BaseInputGroup"),C=d("BaseIcon"),B=d("BaseButton");return S(),w("form",{onSubmit:A(c,["prevent"])},[r("h6",Zt,f(a.$t("settings.customization.estimates.default_formats")),1),r("p",te,f(a.$t("settings.customization.estimates.default_formats_description")),1),t($,{label:a.$t("settings.customization.estimates.default_estimate_email_body"),class:"mt-6 mb-4"},{default:u(()=>[t(p,{modelValue:e.estimate_mail_body,"onUpdate:modelValue":n[0]||(n[0]=v=>e.estimate_mail_body=v),fields:_.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t($,{label:a.$t("settings.customization.estimates.company_address_format"),class:"mt-6 mb-4"},{default:u(()=>[t(p,{modelValue:e.estimate_company_address_format,"onUpdate:modelValue":n[1]||(n[1]=v=>e.estimate_company_address_format=v),fields:s.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t($,{label:a.$t("settings.customization.estimates.shipping_address_format"),class:"mt-6 mb-4"},{default:u(()=>[t(p,{modelValue:e.estimate_shipping_address_format,"onUpdate:modelValue":n[2]||(n[2]=v=>e.estimate_shipping_address_format=v),fields:o.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t($,{label:a.$t("settings.customization.estimates.billing_address_format"),class:"mt-6 mb-4"},{default:u(()=>[t(p,{modelValue:e.estimate_billing_address_format,"onUpdate:modelValue":n[3]||(n[3]=v=>e.estimate_billing_address_format=v),fields:g.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t(B,{loading:b(i),disabled:b(i),variant:"primary",type:"submit",class:"mt-4"},{left:u(v=>[b(i)?R("",!0):(S(),U(C,{key:0,class:M(v.class),name:"SaveIcon"},null,8,["class"]))]),default:u(()=>[D(" "+f(a.$t("settings.customization.save")),1)]),_:1},8,["loading","disabled"])],40,Kt)}}},se={class:"text-gray-900 text-lg font-medium"},ae={class:"mt-1 text-sm text-gray-500"},ne={__name:"EstimatesTabConvertEstimate",setup(z){const{t:m,tm:l}=L.useI18n(),_=F(),g=H(),o=k("utils"),s=T({estimate_convert_action:null});o.mergeSettings(s,{..._.selectedCompanySettings}),E(()=>g.config.estimate_convert_action.map(e=>(e.title=m(e.key),e)));async function i(){let e={settings:{...s}};return await _.updateCompanySettings({data:e,message:"settings.customization.estimates.estimate_settings_updated"}),!0}return(e,c)=>{const a=d("BaseRadio"),n=d("BaseInputGroup");return S(),w(q,null,[r("h6",se,f(e.$tc("settings.customization.estimates.convert_estimate_options")),1),r("p",ae,f(e.$t("settings.customization.estimates.convert_estimate_description")),1),t(n,{required:""},{default:u(()=>[t(a,{id:"no_action",modelValue:s.estimate_convert_action,"onUpdate:modelValue":[c[0]||(c[0]=p=>s.estimate_convert_action=p),i],label:e.$t("settings.customization.estimates.no_action"),size:"sm",name:"filter",value:"no_action",class:"mt-2"},null,8,["modelValue","label"]),t(a,{id:"delete_estimate",modelValue:s.estimate_convert_action,"onUpdate:modelValue":[c[1]||(c[1]=p=>s.estimate_convert_action=p),i],label:e.$t("settings.customization.estimates.delete_estimate"),size:"sm",name:"filter",value:"delete_estimate",class:"my-2"},null,8,["modelValue","label"]),t(a,{id:"mark_estimate_as_accepted",modelValue:s.estimate_convert_action,"onUpdate:modelValue":[c[2]||(c[2]=p=>s.estimate_convert_action=p),i],label:e.$t("settings.customization.estimates.mark_estimate_as_accepted"),size:"sm",name:"filter",value:"mark_estimate_as_accepted"},null,8,["modelValue","label"])]),_:1})],64)}}},ie={class:"divide-y divide-gray-200"},oe={__name:"EstimatesTab",setup(z){const m=k("utils"),l=F(),_=T({estimate_email_attachment:null});m.mergeSettings(_,{...l.selectedCompanySettings});const g=E({get:()=>_.estimate_email_attachment==="YES",set:async o=>{const s=o?"YES":"NO";let i={settings:{estimate_email_attachment:s}};_.estimate_email_attachment=s,await l.updateCompanySettings({data:i,message:"general.setting_updated"})}});return(o,s)=>{const i=d("BaseDivider"),e=d("BaseSwitchSection");return S(),w(q,null,[t(jt),t(i,{class:"my-8"}),t(Jt),t(i,{class:"my-8"}),t(ne),t(i,{class:"my-8"}),t(ee),t(i,{class:"mt-6 mb-2"}),r("ul",ie,[t(e,{modelValue:g.value,"onUpdate:modelValue":s[0]||(s[0]=c=>g.value=c),title:o.$t("settings.customization.estimates.estimate_email_attachment"),description:o.$t("settings.customization.estimates.estimate_email_attachment_setting_description")},null,8,["modelValue","title","description"])])],64)}}},le={__name:"PaymentsTabPaymentNumber",setup(z){const m=pt();return(l,_)=>(S(),U(W,{type:"payment","type-store":b(m),"default-series":"PAY"},null,8,["type-store"]))}},me=["onSubmit"],ue={class:"text-gray-900 text-lg font-medium"},re={class:"mt-1 text-sm text-gray-500 mb-2"},de={__name:"PaymentsTabDefaultFormats",setup(z){const m=F(),l=k("utils"),_=h(["customer","customerCustom","company","payment","paymentCustom"]),g=h(["billing","customer","customerCustom","paymentCustom"]),o=h(["company","paymentCustom"]);let s=h(!1);const i=T({payment_mail_body:null,payment_company_address_format:null,payment_from_customer_address_format:null});l.mergeSettings(i,{...m.selectedCompanySettings});async function e(){s.value=!0;let c={settings:{...i}};return await m.updateCompanySettings({data:c,message:"settings.customization.payments.payment_settings_updated"}),s.value=!1,!0}return(c,a)=>{const n=d("BaseCustomInput"),p=d("BaseInputGroup"),$=d("BaseIcon"),C=d("BaseButton");return S(),w("form",{onSubmit:A(e,["prevent"])},[r("h6",ue,f(c.$t("settings.customization.payments.default_formats")),1),r("p",re,f(c.$t("settings.customization.payments.default_formats_description")),1),t(p,{label:c.$t("settings.customization.payments.default_payment_email_body"),class:"mt-6 mb-4"},{default:u(()=>[t(n,{modelValue:i.payment_mail_body,"onUpdate:modelValue":a[0]||(a[0]=B=>i.payment_mail_body=B),fields:_.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t(p,{label:c.$t("settings.customization.payments.company_address_format"),class:"mt-6 mb-4"},{default:u(()=>[t(n,{modelValue:i.payment_company_address_format,"onUpdate:modelValue":a[1]||(a[1]=B=>i.payment_company_address_format=B),fields:o.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t(p,{label:c.$t("settings.customization.payments.from_customer_address_format"),class:"mt-6 mb-4"},{default:u(()=>[t(n,{modelValue:i.payment_from_customer_address_format,"onUpdate:modelValue":a[2]||(a[2]=B=>i.payment_from_customer_address_format=B),fields:g.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t(C,{loading:b(s),disabled:b(s),variant:"primary",type:"submit",class:"mt-4"},{left:u(B=>[b(s)?R("",!0):(S(),U($,{key:0,class:M(B.class),name:"SaveIcon"},null,8,["class"]))]),default:u(()=>[D(" "+f(c.$t("settings.customization.save")),1)]),_:1},8,["loading","disabled"])],40,me)}}},ce={class:"divide-y divide-gray-200"},_e={__name:"PaymentsTab",setup(z){const m=k("utils"),l=F(),_=T({payment_email_attachment:null});m.mergeSettings(_,{...l.selectedCompanySettings});const g=E({get:()=>_.payment_email_attachment==="YES",set:async o=>{const s=o?"YES":"NO";let i={settings:{payment_email_attachment:s}};_.payment_email_attachment=s,await l.updateCompanySettings({data:i,message:"general.setting_updated"})}});return(o,s)=>{const i=d("BaseDivider"),e=d("BaseSwitchSection");return S(),w(q,null,[t(le),t(i,{class:"my-8"}),t(de),t(i,{class:"mt-6 mb-2"}),r("ul",ce,[t(e,{modelValue:g.value,"onUpdate:modelValue":s[0]||(s[0]=c=>g.value=c),title:o.$t("settings.customization.payments.payment_email_attachment"),description:o.$t("settings.customization.payments.payment_email_attachment_setting_description")},null,8,["modelValue","title","description"])])],64)}}},pe={class:"flex flex-wrap justify-end mt-2 lg:flex-nowrap"},ge={class:"inline-block"},ye={__name:"ItemsTab",setup(z){const{t:m}=L.useI18n(),l=h(null),_=ot(),g=lt(),o=mt(),s=E(()=>[{key:"name",label:m("settings.customization.items.unit_name"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"actions",label:"",tdClass:"text-right text-sm font-medium",sortable:!1}]);async function i({page:n,filter:p,sort:$}){let C={orderByField:$.fieldName||"created_at",orderBy:$.order||"desc",page:n},B=await _.fetchItemUnits(C);return{data:B.data.data,pagination:{totalPages:B.data.meta.last_page,currentPage:n,totalCount:B.data.meta.total,limit:5}}}async function e(){g.openModal({title:m("settings.customization.items.add_item_unit"),componentName:"ItemUnitModal",refreshData:l.value.refresh,size:"sm"})}async function c(n){_.fetchItemUnit(n.data.id),g.openModal({title:m("settings.customization.items.edit_item_unit"),componentName:"ItemUnitModal",id:n.data.id,data:n.data,refreshData:l.value&&l.value.refresh})}function a(n){o.openDialog({title:m("general.are_you_sure"),message:m("settings.customization.items.item_unit_confirm_delete"),yesLabel:m("general.yes"),noLabel:m("general.no"),variant:"danger",hideNoButton:!1,size:"lg"}).then(async p=>{p&&(await _.deleteItemUnit(n.data.id),l.value&&l.value.refresh())})}return(n,p)=>{const $=d("BaseIcon"),C=d("BaseButton"),B=d("BaseDropdownItem"),v=d("BaseDropdown"),x=d("BaseTable");return S(),w(q,null,[t(gt),r("div",pe,[t(C,{variant:"primary-outline",onClick:e},{left:u(N=>[t($,{class:M(N.class),name:"PlusIcon"},null,8,["class"])]),default:u(()=>[D(" "+f(n.$t("settings.customization.items.add_item_unit")),1)]),_:1})]),t(x,{ref_key:"table",ref:l,class:"mt-10",data:i,columns:s.value},{"cell-actions":u(({row:N})=>[t(v,null,{activator:u(()=>[r("div",ge,[t($,{name:"DotsHorizontalIcon",class:"text-gray-500"})])]),default:u(()=>[t(B,{onClick:X=>c(N)},{default:u(()=>[t($,{name:"PencilIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),D(" "+f(n.$t("general.edit")),1)]),_:2},1032,["onClick"]),t(B,{onClick:X=>a(N)},{default:u(()=>[t($,{name:"TrashIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),D(" "+f(n.$t("general.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["columns"])],64)}}},fe={class:"relative"},je={__name:"CustomizationSetting",setup(z){return(m,l)=>{const _=d("BaseTab"),g=d("BaseTabGroup"),o=d("BaseCard");return S(),w("div",fe,[t(o,{"container-class":"px-4 py-5 sm:px-8 sm:py-2"},{default:u(()=>[t(g,null,{default:u(()=>[t(_,{"tab-panel-container":"py-4 mt-px",title:m.$t("settings.customization.invoices.title")},{default:u(()=>[t(Ot)]),_:1},8,["title"]),t(_,{"tab-panel-container":"py-4 mt-px",title:m.$t("settings.customization.estimates.title")},{default:u(()=>[t(oe)]),_:1},8,["title"]),t(_,{"tab-panel-container":"py-4 mt-px",title:m.$t("settings.customization.payments.title")},{default:u(()=>[t(_e)]),_:1},8,["title"]),t(_,{"tab-panel-container":"py-4 mt-px",title:m.$t("settings.customization.items.title")},{default:u(()=>[t(ye)]),_:1},8,["title"])]),_:1})]),_:1})])}}};export{je as default};
