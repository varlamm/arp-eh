import{r as S,a as g,O as i,j as h,k as b,U as r,P as d,as as p,X as f,u as e,l,by as V,g as C,R as k}from"./@vue.8cc12e6e.js";import{p as x,c as N}from"./main.f5ac513d.js";import{c as B,r as j,m as q,d as z}from"./@vuelidate.c7422de1.js";import{v as D}from"./vue-i18n.c6de3223.js";const E={class:"flex justify-between w-full"},G=["onSubmit"],L={class:"p-8 sm:p-6"},T={class:"z-0 flex justify-end p-4 border-t border-gray-200 border-solid border-modal-bg"},F={__name:"ItemUnitModal",setup(X){const t=x(),a=N(),{t:v}=D.useI18n();let s=S(!1);const U=g(()=>({name:{required:B.withMessage(v("validation.required"),j),minLength:B.withMessage(v("validation.name_min_length",{count:3}),q(3))}})),n=z(U,g(()=>t.currentItemUnit));async function $(){if(n.value.$touch(),n.value.$invalid)return!0;try{const o=t.isItemUnitEdit?t.updateItemUnit:t.addItemUnit;s.value=!0,await o(t.currentItemUnit),a.refreshData&&a.refreshData(),m(),s.value=!1}catch{return s.value=!1,!0}}function m(){a.closeModal(),setTimeout(()=>{t.currentItemUnit={id:null,name:""},a.$reset(),n.value.$reset()},300)}return(o,u)=>{const _=i("BaseIcon"),y=i("BaseInput"),w=i("BaseInputGroup"),I=i("BaseButton"),M=i("BaseModal");return h(),b(M,{show:e(a).active&&e(a).componentName==="ItemUnitModal",onClose:m},{header:r(()=>[d("div",E,[p(f(e(a).title)+" ",1),l(_,{name:"XIcon",class:"w-6 h-6 text-gray-500 cursor-pointer",onClick:m})])]),default:r(()=>[d("form",{action:"",onSubmit:V($,["prevent"])},[d("div",L,[l(w,{label:o.$t("settings.customization.items.unit_name"),error:e(n).name.$error&&e(n).name.$errors[0].$message,variant:"horizontal",required:""},{default:r(()=>[l(y,{modelValue:e(t).currentItemUnit.name,"onUpdate:modelValue":u[0]||(u[0]=c=>e(t).currentItemUnit.name=c),invalid:e(n).name.$error,type:"text",onInput:u[1]||(u[1]=c=>e(n).name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),d("div",T,[l(I,{type:"button",variant:"primary-outline",class:"mr-3 text-sm",onClick:m},{default:r(()=>[p(f(o.$t("general.cancel")),1)]),_:1}),l(I,{loading:e(s),disabled:e(s),variant:"primary",type:"submit"},{left:r(c=>[e(s)?k("",!0):(h(),b(_,{key:0,name:"SaveIcon",class:C(c.class)},null,8,["class"]))]),default:r(()=>[p(" "+f(e(t).isItemUnitEdit?o.$t("general.update"):o.$t("general.save")),1)]),_:1},8,["loading","disabled"])])],40,G)]),_:1},8,["show"])}}};export{F as _};
