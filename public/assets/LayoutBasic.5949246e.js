import{v as P}from"./vue-i18n.c6de3223.js";import{b as X,c as Y,d as O,e as K,S as _e,a as he,f as ae,g as F,u as ye}from"./main.f5ac513d.js";import{b as W,u as H}from"./vue-router.746ec05f.js";import{u as oe}from"./exchange-rate.b16bc248.js";import{r as k,f as fe,a as G,O as h,j as a,k as w,U as s,P as n,as as U,X as m,u as e,l as t,by as Q,M as i,g as T,R as C,e as ne,F as E,aW as R,bh as se,o as ge}from"./@vue.8cc12e6e.js";import{o as re}from"./@vueuse.b6c5a1c1.js";import{c as N,r as z,m as ve,d as le,f as be,g as xe}from"./@vuelidate.c7422de1.js";import{u as we}from"./users.aa10f6e7.js";import{l as $e}from"./lodash.8ab3583e.js";import{U as ke,h as J,Y as Ce,S as Se}from"./@headlessui.4523e0e1.js";import{N as Be}from"./NotificationRoot.6362508d.js";import"./@intlify.0be1c2d8.js";import"./vue.a6ed3e81.js";import"./v-tooltip.1cd7a91e.js";import"./vue-resize.0b8cd4b5.js";import"./@popperjs.940d197a.js";import"./axios.7b768d2b.js";import"./pinia.32c02ade.js";import"./moment.9709ab41.js";import"./guid.7b3dea7e.js";import"./prettier.6e0a0647.js";import"./vue-flatpickr-component.30399bbe.js";import"./flatpickr.dff0933c.js";import"./@heroicons.aa650707.js";import"./v-money3.6f830de1.js";import"./maska.1121c2e3.js";const Ie={class:"flex justify-between w-full"},Ue=["onSubmit"],Me={class:"p-4 mb-16 sm:p-6 space-y-4"},Ee={key:1,class:"flex flex-col items-center"},Ve={class:"z-0 flex justify-end p-4 bg-gray-50 border-modal-bg"},Ae={__name:"CompanyModal",setup(L){const p=W(),r=X(),c=Y(),y=O(),{t:_}=P.useI18n();let f=k(!1),v=k(null),u=k(!1),l=k(null),g=k(null);const d=fe({name:null,currency:"",address:{country_id:null}}),S=G(()=>c.active&&c.componentName==="CompanyModal"),$={newCompanyForm:{name:{required:N.withMessage(_("validation.required"),z),minLength:N.withMessage(_("validation.name_min_length",{count:3}),ve(3))},address:{country_id:{required:N.withMessage(_("validation.required"),z)}},currency:{required:N.withMessage(_("validation.required"),z)}}},o=le($,{newCompanyForm:d});async function b(){u.value=!0,await y.fetchCurrencies(),await y.fetchCountries(),d.currency=r.selectedCompanyCurrency.id,d.address.country_id=r.selectedCompany.address.country_id,u.value=!1}function x(B,I){g.value=B,l.value=I}function M(){g.value=null,l.value=null}async function V(){if(o.value.newCompanyForm.$touch(),o.value.$invalid)return!0;f.value=!0;try{const B=await r.addNewCompany(d);if(B.data.data){if(await r.setSelectedCompany(B.data.data),l&&l.value){let I=new FormData;I.append("company_logo",JSON.stringify({name:g.value,data:l.value})),await r.updateCompanyLogo(I),p.push("/admin/dashboard")}await y.setIsAppLoaded(!1),await y.bootstrap(),q()}f.value=!1}catch{f.value=!1}}function j(){d.name="",d.currency="",d.address.country_id="",o.value.$reset()}function q(){c.closeModal(),setTimeout(()=>{j(),o.value.$reset()},300)}return(B,I)=>{const Z=h("BaseIcon"),ie=h("BaseContentPlaceholdersBox"),ce=h("BaseContentPlaceholders"),ue=h("BaseFileUploader"),D=h("BaseInputGroup"),de=h("BaseInput"),ee=h("BaseMultiselect"),me=h("BaseInputGrid"),te=h("BaseButton"),pe=h("BaseModal");return a(),w(pe,{show:S.value,onClose:q,onOpen:b},{header:s(()=>[n("div",Ie,[U(m(e(c).title)+" ",1),t(Z,{name:"XIcon",class:"w-6 h-6 text-gray-500 cursor-pointer",onClick:q})])]),default:s(()=>[n("form",{action:"",onSubmit:Q(V,["prevent"])},[n("div",Me,[t(me,{layout:"one-column"},{default:s(()=>[t(D,{"content-loading":e(u),label:B.$tc("settings.company_info.company_logo")},{default:s(()=>[e(u)?(a(),w(ce,{key:0},{default:s(()=>[t(ie,{rounded:!0,class:"w-full h-24"})]),_:1})):(a(),i("div",Ee,[t(ue,{"preview-image":e(v),base64:"",onRemove:M,onChange:x},null,8,["preview-image"])]))]),_:1},8,["content-loading","label"]),t(D,{label:B.$tc("settings.company_info.company_name"),error:e(o).newCompanyForm.name.$error&&e(o).newCompanyForm.name.$errors[0].$message,"content-loading":e(u),required:""},{default:s(()=>[t(de,{modelValue:d.name,"onUpdate:modelValue":I[0]||(I[0]=A=>d.name=A),invalid:e(o).newCompanyForm.name.$error,"content-loading":e(u),onInput:I[1]||(I[1]=A=>e(o).newCompanyForm.name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"]),t(D,{"content-loading":e(u),label:B.$tc("settings.company_info.country"),error:e(o).newCompanyForm.address.country_id.$error&&e(o).newCompanyForm.address.country_id.$errors[0].$message,required:""},{default:s(()=>[t(ee,{modelValue:d.address.country_id,"onUpdate:modelValue":I[2]||(I[2]=A=>d.address.country_id=A),"content-loading":e(u),label:"name",invalid:e(o).newCompanyForm.address.country_id.$error,options:e(y).countries,"value-prop":"id","can-deselect":!0,"can-clear":!1,searchable:"","track-by":"name"},null,8,["modelValue","content-loading","invalid","options"])]),_:1},8,["content-loading","label","error"]),t(D,{label:B.$t("wizard.currency"),error:e(o).newCompanyForm.currency.$error&&e(o).newCompanyForm.currency.$errors[0].$message,"content-loading":e(u),"help-text":B.$t("wizard.currency_set_alert"),required:""},{default:s(()=>[t(ee,{modelValue:d.currency,"onUpdate:modelValue":I[3]||(I[3]=A=>d.currency=A),"content-loading":e(u),options:e(y).currencies,label:"name","value-prop":"id",searchable:!0,"track-by":"name",placeholder:B.$tc("settings.currencies.select_currency"),invalid:e(o).newCompanyForm.currency.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading","help-text"])]),_:1})]),n("div",Ve,[t(te,{class:"mr-3 text-sm",variant:"primary-outline",outline:"",type:"button",onClick:q},{default:s(()=>[U(m(B.$t("general.cancel")),1)]),_:1}),t(te,{loading:e(f),disabled:e(f),variant:"primary",type:"submit"},{left:s(A=>[e(f)?C("",!0):(a(),w(Z,{key:0,name:"SaveIcon",class:T(A.class)},null,8,["class"]))]),default:s(()=>[U(" "+m(B.$t("general.save")),1)]),_:1},8,["loading","disabled"])])],40,Ue)]),_:1},8,["show"])}}},Re={key:0,class:"w-16 text-sm font-medium truncate sm:w-auto"},Le={key:0,class:"absolute right-0 mt-2 bg-white rounded-md shadow-lg"},Fe={class:"overflow-y-auto scrollbar-thin scrollbar-thumb-rounded-full w-[250px] max-h-[350px] scrollbar-thumb-gray-300 scrollbar-track-gray-10 pb-4"},Te={class:"px-3 py-2 text-xs font-semibold text-gray-400 mb-0.5 block uppercase"},Ne={key:0,class:"flex flex-col items-center justify-center p-2 px-3 mt-4 text-base text-gray-400"},je={key:1},Ge={key:0},Oe=["onClick"],qe={class:"flex items-center"},De={class:"flex items-center justify-center mr-3 overflow-hidden text-base font-semibold bg-gray-200 rounded-md w-9 h-9 text-primary-500"},ze={key:0},Pe=["src"],Xe={class:"flex flex-col"},Ye={class:"text-sm"},We={class:"font-medium"},He={__name:"CompanySwitcher",setup(L){const p=X(),r=Y(),c=H(),y=W(),_=O(),{t:f}=P.useI18n(),v=K(),u=k(!1),l=k(""),g=k(null);ne(c,()=>{u.value=!1,l.value=""}),re(g,()=>{u.value=!1});function d(o){if(o)return o.split(" ")[0].charAt(0).toUpperCase()}function S(){r.openModal({title:f("company_switcher.new_company"),componentName:"CompanyModal",size:"sm"})}async function $(o){await p.setSelectedCompany(o),y.push("/admin/dashboard"),await _.setIsAppLoaded(!1),await _.bootstrap()}return(o,b)=>{const x=h("BaseIcon");return a(),i("div",{ref_key:"companySwitchBar",ref:g,class:"relative rounded"},[t(Ae),n("div",{class:"flex items-center justify-center px-3 h-8 md:h-9 ml-2 text-sm text-white bg-white rounded cursor-pointer bg-opacity-20",onClick:b[0]||(b[0]=M=>u.value=!u.value)},[e(p).selectedCompany?(a(),i("span",Re,m(e(p).selectedCompany.name),1)):C("",!0),t(x,{name:"ChevronDownIcon",class:"h-5 ml-1 text-white"})]),t(se,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:s(()=>[u.value?(a(),i("div",Le,[n("div",Fe,[n("label",Te,m(o.$t("company_switcher.label")),1),e(p).companies.length<1?(a(),i("div",Ne,[t(x,{name:"ExclamationCircleIcon",class:"h-5 text-gray-400"}),U(" "+m(o.$t("company_switcher.no_results_found")),1)])):(a(),i("div",je,[e(p).companies.length>0?(a(),i("div",Ge,[(a(!0),i(E,null,R(e(p).companies,(M,V)=>(a(),i("div",{key:V,class:T(["p-2 px-3 rounded-md cursor-pointer hover:bg-gray-100 hover:text-primary-500",{"bg-gray-100 text-primary-500":e(p).selectedCompany.id===M.id}]),onClick:j=>$(M)},[n("div",qe,[n("span",De,[M.logo?(a(),i("img",{key:1,src:M.logo,alt:"Company logo",class:"w-full h-full object-contain"},null,8,Pe)):(a(),i("span",ze,m(d(M.name)),1))]),n("div",Xe,[n("span",Ye,m(M.name),1)])])],10,Oe))),128))])):C("",!0)]))]),e(v).currentUser.is_owner?(a(),i("div",{key:0,class:"flex items-center justify-center p-4 pl-3 border-t-2 border-gray-100 cursor-pointer text-primary-400 hover:text-primary-500",onClick:S},[t(x,{name:"PlusIcon",class:"h-5 mr-2"}),n("span",We,m(o.$t("company_switcher.add_new_company")),1)])):C("",!0)])):C("",!0)]),_:1})],512)}}},Je={key:0,class:"scrollbar-thin scrollbar-thumb-rounded-full scrollbar-thumb-gray-300 scrollbar-track-gray-100 overflow-y-auto bg-white rounded-md mt-2 shadow-lg p-3 absolute w-[300px] h-[200px] right-0"},Ke={key:0,class:"flex items-center justify-center text-gray-400 text-base flex-col mt-4"},Qe={key:1},Ze={key:0},et={class:"text-sm text-gray-400 mb-0.5 block px-2 uppercase"},tt={class:"flex items-center justify-center w-9 h-9 mr-3 text-base font-semibold bg-gray-200 rounded-full text-primary-500"},at={class:"flex flex-col"},ot={class:"text-sm"},nt={key:0,class:"text-xs text-gray-400"},st={key:1,class:"text-xs text-gray-400"},rt={key:1,class:"mt-2"},lt={class:"text-sm text-gray-400 mb-2 block px-2 mb-0.5 uppercase"},it={class:"flex items-center justify-center w-9 h-9 mr-3 text-base font-semibold bg-gray-200 rounded-full text-primary-500"},ct={class:"flex flex-col"},ut={class:"text-sm"},dt={class:"text-xs text-gray-400"},mt={__name:"GlobalSearchBar",setup(L){const p=we(),r=k(!1),c=k(""),y=k(null),_=k(!1),f=H();ne(f,()=>{r.value=!1,c.value=""}),v=$e.exports.debounce(v,500),re(y,()=>{r.value=!1,c.value=""});function v(){let l={search:c.value};c.value&&(_.value=!0,p.searchUsers(l).then(()=>{r.value=!0}),_.value=!1),c.value===""&&(r.value=!1)}function u(l){if(l)return l.split(" ")[0].charAt(0).toUpperCase()}return(l,g)=>{const d=h("BaseIcon"),S=h("BaseInput"),$=h("router-link");return a(),i("div",{ref_key:"searchBar",ref:y,class:"hidden rounded md:block relative"},[n("div",null,[t(S,{modelValue:c.value,"onUpdate:modelValue":g[0]||(g[0]=o=>c.value=o),placeholder:"Search...","container-class":"!rounded",class:"h-8 md:h-9 !rounded",onInput:v},{left:s(()=>[t(d,{name:"SearchIcon",class:"text-gray-400"})]),right:s(()=>[_.value?(a(),w(_e,{key:0,class:"h-5 text-primary-500"})):C("",!0)]),_:1},8,["modelValue"])]),t(se,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:s(()=>[r.value?(a(),i("div",Je,[e(p).userList.length<1&&e(p).customerList.length<1?(a(),i("div",Ke,[t(d,{name:"ExclamationCircleIcon",class:"text-gray-400"}),U(" "+m(l.$t("global_search.no_results_found")),1)])):(a(),i("div",Qe,[e(p).customerList.length>0?(a(),i("div",Ze,[n("label",et,m(l.$t("global_search.customers")),1),(a(!0),i(E,null,R(e(p).customerList,(o,b)=>(a(),i("div",{key:b,class:"p-2 hover:bg-gray-100 cursor-pointer rounded-md"},[t($,{to:{path:`/admin/customers/${o.id}/view`},class:"flex items-center"},{default:s(()=>[n("span",tt,m(u(o.name)),1),n("div",at,[n("span",ot,m(o.name),1),o.contact_name?(a(),i("span",nt,m(o.contact_name),1)):(a(),i("span",st,m(o.email),1))])]),_:2},1032,["to"])]))),128))])):C("",!0),e(p).userList.length>0?(a(),i("div",rt,[n("label",lt,m(l.$t("global_search.users")),1),(a(!0),i(E,null,R(e(p).userList,(o,b)=>(a(),i("div",{key:b,class:"p-2 hover:bg-gray-100 cursor-pointer rounded-md"},[t($,{to:{path:`/admin/users/${o.id}/edit`},class:"flex items-center"},{default:s(()=>[n("span",it,m(u(o.name)),1),n("div",ct,[n("span",ut,m(o.name),1),n("span",dt,m(o.email),1)])]),_:2},1032,["to"])]))),128))])):C("",!0)]))])):C("",!0)]),_:1})],512)}}},pt={class:"fixed top-0 left-0 z-20 flex items-center justify-between w-full px-4 py-3 md:h-16 md:px-8 bg-gradient-to-r from-primary-500 to-primary-400"},_t=["src"],ht=["onClick"],yt={class:"flex float-right h-8 m-0 list-none md:h-9"},ft={key:0,class:"relative hidden float-left m-0 md:block"},gt={class:"flex items-center justify-center w-8 h-8 ml-2 text-sm text-black bg-white rounded md:h-9 md:w-9"},vt={class:"ml-2"},bt={class:"relative block float-left ml-2"},xt=["src"],wt={__name:"TheSiteHeader",setup(L){const p=he(),r=K(),c=O(),y=W(),_=G(()=>r.currentUser&&r.currentUser.avatar!==0?r.currentUser.avatar:v()),f=G(()=>c.globalSettings.admin_portal_logo?"/storage/"+c.globalSettings.admin_portal_logo:!1);function v(){return new URL("/img/default-avatar.jpg",self.location)}function u(){return r.hasAbilities([F.CREATE_INVOICE,F.CREATE_ESTIMATE,F.CREATE_CUSTOMER])}async function l(){await p.logout(),y.push("/login")}function g(){c.setSidebarVisibility(!0)}return(d,S)=>{const $=h("router-link"),o=h("BaseIcon"),b=h("BaseDropdownItem"),x=h("BaseDropdown");return a(),i("header",pt,[t($,{to:"/admin/dashboard",class:"float-none text-lg not-italic font-black tracking-wider text-white brand-main md:float-left font-base hidden md:block"},{default:s(()=>[f.value?(a(),i("img",{key:0,src:f.value,class:"h-6"},null,8,_t)):(a(),w(ae,{key:1,class:"h-6","light-color":"white","dark-color":"white"}))]),_:1}),n("div",{class:T([{"is-active":e(c).isSidebarOpen},"flex float-left p-1 overflow-visible text-sm ease-linear bg-white border-0 rounded cursor-pointer md:hidden md:ml-0 hover:bg-gray-100"]),onClick:Q(g,["prevent"])},[t(o,{name:"MenuIcon",class:"!w-6 !h-6 text-gray-500"})],10,ht),n("ul",yt,[u?(a(),i("li",ft,[t(x,{"width-class":"w-48"},{activator:s(()=>[n("div",gt,[t(o,{name:"PlusIcon",class:"w-5 h-5 text-gray-600"})])]),default:s(()=>[t($,{to:"/admin/invoices/create"},{default:s(()=>[e(r).hasAbilities(e(F).CREATE_INVOICE)?(a(),w(b,{key:0},{default:s(()=>[t(o,{name:"DocumentTextIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),U(" "+m(d.$t("invoices.new_invoice")),1)]),_:1})):C("",!0)]),_:1}),t($,{to:"/admin/estimates/create"},{default:s(()=>[e(r).hasAbilities(e(F).CREATE_ESTIMATE)?(a(),w(b,{key:0},{default:s(()=>[t(o,{name:"DocumentIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),U(" "+m(d.$t("estimates.new_estimate")),1)]),_:1})):C("",!0)]),_:1}),t($,{to:"/admin/customers/create"},{default:s(()=>[e(r).hasAbilities(e(F).CREATE_CUSTOMER)?(a(),w(b,{key:0},{default:s(()=>[t(o,{name:"UserIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),U(" "+m(d.$t("customers.new_customer")),1)]),_:1})):C("",!0)]),_:1})]),_:1})])):C("",!0),n("li",vt,[e(r).currentUser.is_owner||e(r).hasAbilities(e(F).VIEW_CUSTOMER)?(a(),w(mt,{key:0})):C("",!0)]),n("li",null,[t(He)]),n("li",bt,[t(x,{"width-class":"w-48"},{activator:s(()=>[n("img",{src:_.value,class:"block w-8 h-8 rounded md:h-9 md:w-9 object-cover"},null,8,xt)]),default:s(()=>[t($,{to:"/admin/settings/account-settings"},{default:s(()=>[t(b,null,{default:s(()=>[t(o,{name:"CogIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),U(" "+m(d.$t("navigation.settings")),1)]),_:1})]),_:1}),t(b,{onClick:l},{default:s(()=>[t(o,{name:"LogoutIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),U(" "+m(d.$t("navigation.logout")),1)]),_:1})]),_:1})])])])}}},$t={class:"relative flex flex-col flex-1 w-full max-w-xs bg-white"},kt={class:"absolute top-0 right-0 pt-2 -mr-12"},Ct=n("span",{class:"sr-only"},"Close sidebar",-1),St={class:"flex-1 h-0 pt-5 pb-4 overflow-y-auto"},Bt={class:"flex items-center shrink-0 px-4 mb-10"},It=n("div",{class:"shrink-0 w-14"},null,-1),Ut={class:"hidden w-56 h-screen pb-32 overflow-y-auto bg-white border-r border-gray-200 border-solid xl:w-64 md:fixed md:flex md:flex-col md:inset-y-0 pt-16"},Mt={__name:"TheSiteSidebar",setup(L){const p=H(),r=O();function c(y){return p.path.indexOf(y)>-1}return(y,_)=>{const f=h("BaseIcon"),v=h("router-link");return a(),i(E,null,[t(e(Se),{as:"template",show:e(r).isSidebarOpen},{default:s(()=>[t(e(ke),{as:"div",class:"fixed inset-0 z-40 flex md:hidden",onClose:_[3]||(_[3]=u=>e(r).setSidebarVisibility(!1))},{default:s(()=>[t(e(J),{as:"template",enter:"transition-opacity ease-linear duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[t(e(Ce),{class:"fixed inset-0 bg-gray-600 bg-opacity-75"})]),_:1}),t(e(J),{as:"template",enter:"transition ease-in-out duration-300","enter-from":"-translate-x-full","enter-to":"translate-x-0",leave:"transition ease-in-out duration-300","leave-from":"translate-x-0","leave-to":"-translate-x-full"},{default:s(()=>[n("div",$t,[t(e(J),{as:"template",enter:"ease-in-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in-out duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:s(()=>[n("div",kt,[n("button",{class:"flex items-center justify-center w-10 h-10 ml-1 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:_[0]||(_[0]=u=>e(r).setSidebarVisibility(!1))},[Ct,t(f,{name:"XIcon",class:"w-6 h-6 text-white","aria-hidden":"true"})])])]),_:1}),n("div",St,[n("div",Bt,[t(ae,{class:"block h-auto max-w-full w-36 text-primary-400",alt:"Xcelerate Logo"})]),(a(!0),i(E,null,R(e(r).menuGroups,u=>(a(),i("nav",{key:u,class:"mt-5 space-y-1"},[(a(!0),i(E,null,R(u,l=>(a(),w(v,{key:l.name,to:l.link,class:T([c(l.link)?"text-primary-500 border-primary-500 bg-gray-100 ":"text-black","cursor-pointer px-0 pl-4 py-3 border-transparent flex items-center border-l-4 border-solid text-sm not-italic font-medium"]),onClick:_[2]||(_[2]=g=>e(r).setSidebarVisibility(!1))},{default:s(()=>[t(f,{name:l.icon,class:T([c(l.link)?"text-primary-500 ":"text-gray-400","mr-4 shrink-0 h-5 w-5"]),onClick:_[1]||(_[1]=g=>e(r).setSidebarVisibility(!1))},null,8,["name","class"]),U(" "+m(y.$t(l.title)),1)]),_:2},1032,["to","class"]))),128))]))),128))])])]),_:1}),It]),_:1})]),_:1},8,["show"]),n("div",Ut,[(a(!0),i(E,null,R(e(r).menuGroups,u=>(a(),i("div",{key:u,class:"p-0 m-0 mt-6 list-none"},[(a(!0),i(E,null,R(u,l=>(a(),w(v,{key:l,to:l.link,class:T([c(l.link)?"text-primary-500 border-primary-500 bg-gray-100 ":"text-black","cursor-pointer px-0 pl-6 hover:bg-gray-50 py-3 group flex items-center border-l-4 border-solid border-transparent text-sm not-italic font-medium"])},{default:s(()=>[t(f,{name:l.icon,class:T([c(l.link)?"text-primary-500 group-hover:text-primary-500 ":"text-gray-400 group-hover:text-black","mr-4 shrink-0 h-5 w-5 "])},null,8,["name","class"]),U(" "+m(y.$t(l.title)),1)]),_:2},1032,["to","class"]))),128))]))),128))])],64)}}},Et={class:"font-medium text-lg text-left"},Vt={class:"mt-2 text-sm leading-snug text-gray-500",style:{"max-width":"680px"}},At=["onSubmit"],Rt={class:"text-gray-500 sm:text-sm"},Lt={class:"text-gray-400 text-xs mt-2 font-light"},Ft={slot:"footer",class:"z-0 flex justify-end mt-4 pt-4 border-t border-gray-200 border-solid border-modal-bg"},Tt={__name:"ExchangeRateBulkUpdate",emits:["update"],setup(L,{emit:p}){const r=oe();ye();const c=X(),{t:y,tm:_}=P.useI18n();let f=k(!1);k(!1);const v={exchange_rate:{required:N.withMessage(y("validation.required"),z),decimal:N.withMessage(y("validation.valid_exchange_rate"),be)}},u=le();async function l(){if(u.value.$touch(),u.value.$invalid)return!0;f.value=!0;let g=r.bulkCurrencies.map(S=>({id:S.id,exchange_rate:S.exchange_rate})),d=await r.updateBulkExchangeRate({currencies:g});d.data.success&&p("update",d.data.success),f.value=!1}return(g,d)=>{const S=h("BaseInput"),$=h("BaseInputGroup"),o=h("BaseButton"),b=h("BaseCard");return a(),w(b,null,{default:s(()=>[n("h6",Et,m(g.$t("settings.exchange_rate.title")),1),n("p",Vt,m(g.$t("settings.exchange_rate.description",{currency:e(c).selectedCompanyCurrency.name})),1),n("form",{action:"",onSubmit:Q(l,["prevent"])},[(a(!0),i(E,null,R(e(r).bulkCurrencies,(x,M)=>(a(),w(e(xe),{key:M,state:x,rules:v},{default:s(({v:V})=>[t($,{class:"my-5",label:`${x.code} to ${e(c).selectedCompanyCurrency.code}`,error:V.exchange_rate.$error&&V.exchange_rate.$errors[0].$message,required:""},{default:s(()=>[t(S,{modelValue:x.exchange_rate,"onUpdate:modelValue":j=>x.exchange_rate=j,addon:`1 ${x.code} =`,invalid:V.exchange_rate.$error,onInput:j=>V.exchange_rate.$touch()},{right:s(()=>[n("span",Rt,m(e(c).selectedCompanyCurrency.code),1)]),_:2},1032,["modelValue","onUpdate:modelValue","addon","invalid","onInput"]),n("span",Lt,m(g.$t("settings.exchange_rate.exchange_help_text",{currency:x.code,baseCurrency:e(c).selectedCompanyCurrency.code})),1)]),_:2},1032,["label","error"])]),_:2},1032,["state"]))),128)),n("div",Ft,[t(o,{loading:e(f),variant:"primary",type:"submit"},{default:s(()=>[U(m(g.$t("general.save")),1)]),_:1},8,["loading"])])],40,At)]),_:1})}}},Nt={__name:"ExchangeRateBulkUpdateModal",setup(L){const p=Y(),r=G(()=>p.active&&p.componentName==="ExchangeRateBulkUpdateModal");function c(){p.closeModal()}return(y,_)=>{const f=h("BaseModal");return a(),w(f,{show:r.value},{default:s(()=>[t(Tt,{onUpdate:_[0]||(_[0]=v=>c())})]),_:1},8,["show"])}}},jt={key:0,class:"h-full"},Gt={class:"h-screen h-screen-ios overflow-y-auto md:pl-56 xl:pl-64 min-h-0"},Ot={class:"pt-16 pb-16"},_a={__name:"LayoutBasic",setup(L){const p=O(),r=H(),c=K(),y=W(),_=Y();P.useI18n();const f=oe(),v=X(),u=G(()=>p.isAppLoaded);return ge(()=>{p.bootstrap().then(l=>{r.meta.ability&&!c.hasAbilities(r.meta.ability)?y.push({name:"account.settings"}):r.meta.isOwner&&!c.currentUser.is_owner&&y.push({name:"account.settings"}),l.data.current_company_settings.bulk_exchange_rate_configured==="NO"&&f.fetchBulkCurrencies().then(g=>{if(g.data.currencies.length)_.openModal({componentName:"ExchangeRateBulkUpdateModal",size:"sm"});else{let d={settings:{bulk_exchange_rate_configured:"YES"}};v.updateCompanySettings({data:d})}})})}),(l,g)=>{const d=h("router-view"),S=h("BaseGlobalLoader");return u.value?(a(),i("div",jt,[t(Be),t(wt),t(Mt),t(Nt),n("main",Gt,[n("div",Ot,[t(d)])])])):(a(),w(S,{key:1}))}}};export{_a as default};
