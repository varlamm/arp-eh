import{i as J,r as b,f as K,a as I,O as s,j as B,k as y,U as a,l as e,L as k,bx as V,u as p,g as w,as as i,X as c,R as Q,P}from"./@vue.8cc12e6e.js";import{u as Y}from"./invoice.c832422e.js";import Z from"./BaseTable.62565885.js";import{u as ee}from"./global.b17b6368.js";import{u as te}from"./vue-router.746ec05f.js";import{_ as ae}from"./MoonwalkerIcon.02070a25.js";import{v as oe}from"./vue-i18n.c6de3223.js";import{d as se}from"./@vueuse.b6c5a1c1.js";import"./auth.f67c9755.js";import"./axios.7b768d2b.js";import"./main.f5ac513d.js";import"./v-tooltip.1cd7a91e.js";import"./vue-resize.0b8cd4b5.js";import"./@popperjs.940d197a.js";import"./pinia.32c02ade.js";import"./lodash.8ab3583e.js";import"./@intlify.0be1c2d8.js";import"./vue.a6ed3e81.js";import"./@vuelidate.c7422de1.js";import"./moment.9709ab41.js";import"./guid.7b3dea7e.js";import"./@headlessui.4523e0e1.js";import"./prettier.6e0a0647.js";import"./vue-flatpickr-component.30399bbe.js";import"./flatpickr.dff0933c.js";import"./@heroicons.aa650707.js";import"./v-money3.6f830de1.js";import"./maska.1121c2e3.js";const ne=P("div",{class:"hidden w-8 h-0 mx-4 border border-gray-400 border-solid xl:block",style:{"margin-top":"1.5rem"}},null,-1),le={class:"relative table-container"},He={__name:"Index",setup(re){const{t:u}=oe.useI18n();J("utils"),te();const $=b(null);let g=b(!0),m=b(!1);const E=b(["DRAFT","DUE","SENT","VIEWED","COMPLETED"]),o=K({status:"",from_date:"",to_date:"",invoice_number:""}),_=Y(),h=ee();I(()=>h.currency);const N=I(()=>[{key:"invoice_date",label:u("invoices.date"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"invoice_number",label:u("invoices.number")},{key:"status",label:u("invoices.status")},{key:"paid_status",label:u("invoices.paid_status")},{key:"due_amount",label:u("dashboard.recent_invoices_card.amount_due")},{key:"actions",thClass:"text-right",tdClass:"text-right text-sm font-medium",sortable:!1}]),D=I(()=>!_.totalInvoices&&!g.value);se(o,()=>{H()},{debounce:500});function U(){$.value.refresh()}function H(){U()}function S(){o.status="",o.from_date="",o.to_date="",o.invoice_number=""}function T(){m.value&&S(),m.value=!m.value}async function W({page:n,sort:l}){let f={status:o.status,invoice_number:o.invoice_number,from_date:o.from_date,to_date:o.to_date,orderByField:l.fieldName||"created_at",orderBy:l.order||"desc",page:n};g.value=!0;let d=await _.fetchInvoices(f,h.companySlug);return g.value=!1,{data:d.data.data,pagination:{totalPages:d.data.meta.last_page,currentPage:n,totalCount:d.data.meta.total,limit:10}}}return(n,l)=>{const f=s("BaseBreadcrumbItem"),d=s("BaseBreadcrumb"),r=s("BaseIcon"),j=s("BaseButton"),z=s("BasePageHeader"),G=s("BaseSelectInput"),v=s("BaseInputGroup"),M=s("BaseInput"),C=s("BaseDatePicker"),R=s("BaseFilterWrapper"),L=s("BaseEmptyPlaceholder"),x=s("router-link"),O=s("BaseFormatMoney"),F=s("BaseInvoiceStatusBadge"),X=s("BaseDropdownItem"),A=s("BaseDropdown"),q=s("BasePage");return B(),y(q,null,{default:a(()=>[e(z,{title:n.$t("invoices.title")},{actions:a(()=>[k(e(j,{variant:"primary-outline",onClick:T},{right:a(t=>[p(m)?(B(),y(r,{key:1,name:"XIcon",class:w(t.class)},null,8,["class"])):(B(),y(r,{key:0,name:"FilterIcon",class:w(t.class)},null,8,["class"]))]),default:a(()=>[i(c(n.$t("general.filter"))+" ",1)]),_:1},512),[[V,p(_).totalInvoices]])]),default:a(()=>[e(d,null,{default:a(()=>[e(f,{title:n.$t("general.home"),to:`/${p(h).companySlug}/customer/dashboard`},null,8,["title","to"]),e(f,{title:n.$tc("invoices.invoice",2),to:"#",active:""},null,8,["title"])]),_:1})]),_:1},8,["title"]),k(e(R,{onClear:S},{default:a(()=>[e(v,{label:n.$t("invoices.status"),class:"px-3"},{default:a(()=>[e(G,{modelValue:o.status,"onUpdate:modelValue":l[0]||(l[0]=t=>o.status=t),options:E.value,searchable:"","allow-empty":!1,placeholder:n.$t("general.select_a_status")},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"]),e(v,{label:n.$t("invoices.invoice_number"),color:"black-light",class:"px-3 mt-2"},{default:a(()=>[e(M,{modelValue:o.invoice_number,"onUpdate:modelValue":l[1]||(l[1]=t=>o.invoice_number=t)},{default:a(()=>[e(r,{name:"DotsHorizontalIcon",class:"h-5 text-gray-500"}),e(r,{name:"HashtagIcon",class:"h-5 ml-3 text-gray-600"})]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(v,{label:n.$t("general.from"),class:"px-3"},{default:a(()=>[e(C,{modelValue:o.from_date,"onUpdate:modelValue":l[2]||(l[2]=t=>o.from_date=t),"calendar-button":!0,"calendar-button-icon":"calendar"},null,8,["modelValue"])]),_:1},8,["label"]),ne,e(v,{label:n.$t("general.to"),class:"px-3"},{default:a(()=>[e(C,{modelValue:o.to_date,"onUpdate:modelValue":l[3]||(l[3]=t=>o.to_date=t),"calendar-button":!0,"calendar-button-icon":"calendar"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},512),[[V,p(m)]]),D.value?(B(),y(L,{key:0,title:n.$t("invoices.no_invoices"),description:n.$t("invoices.list_of_invoices")},{default:a(()=>[e(ae,{class:"mt-5 mb-4"})]),_:1},8,["title","description"])):Q("",!0),k(P("div",le,[e(Z,{ref_key:"table",ref:$,data:W,columns:N.value,"placeholder-count":p(_).totalInvoices>=20?10:5,class:"mt-10"},{"cell-invoice_date":a(({row:t})=>[i(c(t.data.formatted_invoice_date),1)]),"cell-invoice_number":a(({row:t})=>[e(x,{to:{path:`invoices/${t.data.id}/view`},class:"font-medium text-primary-500"},{default:a(()=>[i(c(t.data.invoice_number),1)]),_:2},1032,["to"])]),"cell-due_amount":a(({row:t})=>[e(O,{amount:t.data.total,currency:t.data.customer.currency},null,8,["amount","currency"])]),"cell-status":a(({row:t})=>[e(F,{status:t.data.status,class:"px-3 py-1"},{default:a(()=>[i(c(t.data.status),1)]),_:2},1032,["status"])]),"cell-paid_status":a(({row:t})=>[e(F,{status:t.data.paid_status,class:"px-3 py-1"},{default:a(()=>[i(c(t.data.paid_status),1)]),_:2},1032,["status"])]),"cell-actions":a(({row:t})=>[e(A,null,{activator:a(()=>[e(r,{name:"DotsHorizontalIcon",class:"h-5 text-gray-500"})]),default:a(()=>[e(x,{to:`invoices/${t.data.id}/view`},{default:a(()=>[e(X,null,{default:a(()=>[e(r,{name:"EyeIcon",class:"h-5 mr-3 text-gray-600"}),i(" "+c(n.$t("general.view")),1)]),_:1})]),_:2},1032,["to"])]),_:2},1024)]),_:1},8,["columns","placeholder-count"])],512),[[V,!D.value]])]),_:1})}}};export{He as default};
