import{r as h,f as k,a as c,O as n,j as y,k as w,U as p,P as u,l,u as a,g as q,R as E,as as F,X as M,by as U}from"./@vue.8cc12e6e.js";import{v as Y}from"./vue-i18n.c6de3223.js";import{d as D,c as S,r as O,e as j}from"./@vuelidate.c7422de1.js";import{b as G}from"./main.f5ac513d.js";import"./@intlify.0be1c2d8.js";import"./vue.a6ed3e81.js";import"./v-tooltip.1cd7a91e.js";import"./vue-resize.0b8cd4b5.js";import"./@popperjs.940d197a.js";import"./axios.7b768d2b.js";import"./vue-router.746ec05f.js";import"./pinia.32c02ade.js";import"./lodash.8ab3583e.js";import"./moment.9709ab41.js";import"./guid.7b3dea7e.js";import"./@headlessui.4523e0e1.js";import"./@vueuse.b6c5a1c1.js";import"./prettier.6e0a0647.js";import"./vue-flatpickr-component.30399bbe.js";import"./flatpickr.dff0933c.js";import"./@heroicons.aa650707.js";import"./v-money3.6f830de1.js";import"./maska.1121c2e3.js";const z=["onSubmit"],P={class:"grid-cols-2 col-span-1 mt-14"},R={class:"divide-y divide-gray-200"},ue={__name:"NotificationsSetting",setup(T){const s=G();let m=h(!1);const{t:_}=Y.useI18n(),i=k({notify_invoice_viewed:s.selectedCompanySettings.notify_invoice_viewed,notify_estimate_viewed:s.selectedCompanySettings.notify_estimate_viewed,notification_email:s.selectedCompanySettings.notification_email}),B=c(()=>({notification_email:{required:S.withMessage(_("validation.required"),O),email:S.withMessage(_("validation.email_incorrect"),j)}})),r=D(B,c(()=>i)),v=c({get:()=>i.notify_invoice_viewed==="YES",set:async e=>{const t=e?"YES":"NO";let d={settings:{notify_invoice_viewed:t}};i.notify_invoice_viewed=t,await s.updateCompanySettings({data:d,message:"general.setting_updated"})}}),f=c({get:()=>i.notify_estimate_viewed==="YES",set:async e=>{const t=e?"YES":"NO";let d={settings:{notify_estimate_viewed:t}};i.notify_estimate_viewed=t,await s.updateCompanySettings({data:d,message:"general.setting_updated"})}});async function $(){if(r.value.$touch(),r.value.$invalid)return!0;m.value=!0;const e={settings:{notification_email:i.notification_email}};await s.updateCompanySettings({data:e,message:"settings.notification.email_save_message"}),m.value=!1}return(e,t)=>{const d=n("BaseInput"),V=n("BaseInputGroup"),C=n("BaseIcon"),b=n("BaseButton"),I=n("BaseDivider"),g=n("BaseSwitchSection"),N=n("BaseSettingCard");return y(),w(N,{title:e.$t("settings.notification.title"),description:e.$t("settings.notification.description")},{default:p(()=>[u("form",{action:"",onSubmit:U($,["prevent"])},[u("div",P,[l(V,{error:a(r).notification_email.$error&&a(r).notification_email.$errors[0].$message,label:e.$t("settings.notification.email"),class:"my-2",required:""},{default:p(()=>[l(d,{modelValue:i.notification_email,"onUpdate:modelValue":t[0]||(t[0]=o=>i.notification_email=o),modelModifiers:{trim:!0},invalid:a(r).notification_email.$error,type:"email",onInput:t[1]||(t[1]=o=>a(r).notification_email.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["error","label"]),l(b,{disabled:a(m),loading:a(m),variant:"primary",type:"submit",class:"mt-6"},{left:p(o=>[a(m)?E("",!0):(y(),w(C,{key:0,class:q(o.class),name:"SaveIcon"},null,8,["class"]))]),default:p(()=>[F(" "+M(e.$tc("settings.notification.save")),1)]),_:1},8,["disabled","loading"])])],40,z),l(I,{class:"mt-6 mb-2"}),u("ul",R,[l(g,{modelValue:v.value,"onUpdate:modelValue":t[2]||(t[2]=o=>v.value=o),title:e.$t("settings.notification.invoice_viewed"),description:e.$t("settings.notification.invoice_viewed_desc")},null,8,["modelValue","title","description"]),l(g,{modelValue:f.value,"onUpdate:modelValue":t[3]||(t[3]=o=>f.value=o),title:e.$t("settings.notification.estimate_viewed"),description:e.$t("settings.notification.estimate_viewed_desc")},null,8,["modelValue","title","description"])])]),_:1},8,["title","description"])}}};export{ue as default};
