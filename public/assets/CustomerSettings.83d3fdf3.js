import{r as p,a as h,O as c,j as v,M as P,l as i,U as m,P as V,X as C,u as e,z as _,k as y,g as A,R as D,as as G,by as L}from"./@vue.8cc12e6e.js";import{a as O,u as j}from"./global.b17b6368.js";import{v as z}from"./vue-i18n.c6de3223.js";import{d as T,c as g,r as k,m as S,e as X,s as H}from"./@vuelidate.c7422de1.js";import{u as J}from"./vue-router.746ec05f.js";import"./auth.f67c9755.js";import"./axios.7b768d2b.js";import"./main.f5ac513d.js";import"./v-tooltip.1cd7a91e.js";import"./vue-resize.0b8cd4b5.js";import"./@popperjs.940d197a.js";import"./pinia.32c02ade.js";import"./lodash.8ab3583e.js";import"./@intlify.0be1c2d8.js";import"./vue.a6ed3e81.js";import"./moment.9709ab41.js";import"./guid.7b3dea7e.js";import"./@headlessui.4523e0e1.js";import"./@vueuse.b6c5a1c1.js";import"./prettier.6e0a0647.js";import"./vue-flatpickr-component.30399bbe.js";import"./flatpickr.dff0933c.js";import"./@heroicons.aa650707.js";import"./v-money3.6f830de1.js";import"./maska.1121c2e3.js";const K=["onSubmit"],Q={class:"font-bold text-left"},W={class:"mt-2 text-sm leading-snug text-left text-gray-500",style:{"max-width":"680px"}},Y={class:"grid gap-6 sm:grid-col-1 md:grid-cols-2 mt-6"},Z=V("span",null,null,-1),Ce={__name:"CustomerSettings",setup(ee){const s=O();j(),J();const{t:u,tm:U}=z.useI18n();let f=p([]),d=p(!1),w=p(null),n=p(!1),l=p(!1);const b=p(!1);s.userForm.avatar&&f.value.push({image:s.userForm.avatar});const x=h(()=>({userForm:{name:{required:g.withMessage(u("validation.required"),k),minLength:g.withMessage(u("validation.name_min_length",{count:3}),S(3))},email:{required:g.withMessage(u("validation.required"),k),email:g.withMessage(u("validation.email_incorrect"),X)},password:{minLength:g.withMessage(u("validation.password_min_length",{count:8}),S(8))},confirm_password:{sameAsPassword:g.withMessage(u("validation.password_incorrect"),H(s.userForm.password))}}})),a=T(x,h(()=>s));function M(t,r){w.value=r}function q(){w.value=null,b.value=!0}function R(){if(a.value.userForm.$touch(),a.value.userForm.$invalid)return!0;d.value=!0;let t=new FormData;t.append("name",s.userForm.name),t.append("email",s.userForm.email),s.userForm.password!=null&&s.userForm.password!==void 0&&s.userForm.password!==""&&t.append("password",s.userForm.password),w.value&&t.append("customer_avatar",w.value),t.append("is_customer_avatar_removed",b.value),s.updateCurrentUser({data:t,message:U("settings.account_settings.updated_message")}).then(r=>{r.data.data&&(d.value=!1,s.$patch(B=>{B.userForm.password="",B.userForm.confirm_password=""}),w.value=null,b.value=!1)}).catch(r=>{d.value=!1})}return(t,r)=>{const B=c("BaseFileUploader"),F=c("BaseInputGroup"),I=c("BaseInput"),$=c("BaseIcon"),E=c("BaseButton"),N=c("BaseCard");return v(),P("form",{class:"relative h-full mt-4",onSubmit:L(R,["prevent"])},[i(N,null,{default:m(()=>[V("div",null,[V("h6",Q,C(t.$t("settings.account_settings.account_settings")),1),V("p",W,C(t.$t("settings.account_settings.section_description")),1)]),V("div",Y,[i(F,{label:t.$tc("settings.account_settings.profile_picture")},{default:m(()=>[i(B,{modelValue:e(f),"onUpdate:modelValue":r[0]||(r[0]=o=>_(f)?f.value=o:f=o),avatar:!0,accept:"image/*",onChange:M,onRemove:q},null,8,["modelValue"])]),_:1},8,["label"]),Z,i(F,{label:t.$tc("settings.account_settings.name"),error:e(a).userForm.name.$error&&e(a).userForm.name.$errors[0].$message,required:""},{default:m(()=>[i(I,{modelValue:e(s).userForm.name,"onUpdate:modelValue":r[1]||(r[1]=o=>e(s).userForm.name=o),invalid:e(a).userForm.name.$error,onInput:r[2]||(r[2]=o=>e(a).userForm.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),i(F,{label:t.$tc("settings.account_settings.email"),error:e(a).userForm.email.$error&&e(a).userForm.email.$errors[0].$message,required:""},{default:m(()=>[i(I,{modelValue:e(s).userForm.email,"onUpdate:modelValue":r[3]||(r[3]=o=>e(s).userForm.email=o),invalid:e(a).userForm.email.$error,onInput:r[4]||(r[4]=o=>e(a).userForm.email.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),i(F,{error:e(a).userForm.password.$error&&e(a).userForm.password.$errors[0].$message,label:t.$tc("settings.account_settings.password")},{default:m(()=>[i(I,{modelValue:e(s).userForm.password,"onUpdate:modelValue":r[7]||(r[7]=o=>e(s).userForm.password=o),type:e(n)?"text":"password",invalid:e(a).userForm.password.$error,onInput:r[8]||(r[8]=o=>e(a).userForm.password.$touch())},{right:m(()=>[e(n)?(v(),y($,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:r[5]||(r[5]=o=>_(n)?n.value=!e(n):n=!e(n))})):(v(),y($,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:r[6]||(r[6]=o=>_(n)?n.value=!e(n):n=!e(n))}))]),_:1},8,["modelValue","type","invalid"])]),_:1},8,["error","label"]),i(F,{label:t.$tc("settings.account_settings.confirm_password"),error:e(a).userForm.confirm_password.$error&&e(a).userForm.confirm_password.$errors[0].$message},{default:m(()=>[i(I,{modelValue:e(s).userForm.confirm_password,"onUpdate:modelValue":r[11]||(r[11]=o=>e(s).userForm.confirm_password=o),type:e(l)?"text":"password",invalid:e(a).userForm.confirm_password.$error,onInput:r[12]||(r[12]=o=>e(a).userForm.confirm_password.$touch())},{right:m(()=>[e(l)?(v(),y($,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:r[9]||(r[9]=o=>_(l)?l.value=!e(l):l=!e(l))})):(v(),y($,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:r[10]||(r[10]=o=>_(l)?l.value=!e(l):l=!e(l))}))]),_:1},8,["modelValue","type","invalid"])]),_:1},8,["label","error"])]),i(E,{loading:e(d),disabled:e(d),class:"mt-6"},{left:m(o=>[e(d)?D("",!0):(v(),y($,{key:0,name:"SaveIcon",class:A(o.class)},null,8,["class"]))]),default:m(()=>[G(" "+C(t.$t("general.save")),1)]),_:1},8,["loading","disabled"])]),_:1})],40,K)}}};export{Ce as default};
